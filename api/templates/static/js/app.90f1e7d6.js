(function(e){function t(t){for(var o,a,r=t[0],i=t[1],u=t[2],s=0,d=[];s<r.length;s++)a=r[s],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);b&&b(t);while(d.length)d.shift()();return l.push.apply(l,u||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(o=!1)}o&&(l.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},c={app:0},l=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var b=i;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0f2a":function(e,t,n){},"162c":function(e,t,n){"use strict";n("0f2a")},2116:function(e,t,n){},4137:function(e,t,n){},4402:function(e,t,n){},"528e":function(e,t,n){"use strict";n("eef8")},"5e32":function(e,t,n){},"800d":function(e,t,n){"use strict";n("4402")},"96e1":function(e,t,n){},ada5:function(e,t,n){"use strict";n("2116")},c69f:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,l,a){var r=Object(o["S"])("HomeView");return Object(o["I"])(),Object(o["k"])(r)}var l=n("d4ec"),a=n("262e"),r=n("2caf"),i=n("9ab4"),u=n("ce1f");function b(e,t,n,c,l,a){var r=Object(o["S"])("HomeLeftAside"),i=Object(o["S"])("router-view"),u=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(u,null,{default:Object(o["hb"])((function(){return[e.showMenu?(Object(o["I"])(),Object(o["k"])(r,{key:0})):Object(o["l"])("",!0),Object(o["q"])(u,{style:{"background-color":"#f4f4f4"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{style:{"background-color":"#ffffff"}})]})),_:1})]})),_:1})}var s=n("5530"),d=(n("b0c0"),function(e){return Object(o["M"])("data-v-c2b80158"),e=e(),Object(o["J"])(),e}),m=d((function(){return Object(o["n"])("i",{class:"el-icon-info"},null,-1)})),f=Object(o["p"])("退出登录");function O(e,t,n,c,l,a){var r=Object(o["S"])("el-dropdown-item"),i=Object(o["S"])("el-dropdown-menu"),u=Object(o["S"])("el-dropdown"),b=Object(o["S"])("el-menu-item"),s=Object(o["S"])("el-menu"),d=Object(o["S"])("el-aside");return e.showLeftMenu?(Object(o["I"])(),Object(o["k"])(d,{key:0,width:"180px",style:{"text-align":"left"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini","split-button":"true",type:"primary",placement:"bottom-end",trigger:"click",style:{"padding-left":"20px","padding-bottom":"0px"}},{dropdown:Object(o["hb"])((function(){return[Object(o["q"])(i,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{onClick:e.loginOut,icon:"el-icon-back"},{default:Object(o["hb"])((function(){return[f]})),_:1},8,["onClick"])]})),_:1})]})),default:Object(o["hb"])((function(){return[m,Object(o["p"])(" "+Object(o["W"])(e.u_name)+" ",1)]})),_:1}),Object(o["q"])(s,{"text-color":"#ffffff","active-text-color":"#409EFF","background-color":"#00000000",router:!0,"default-active":e.currPath,onSelect:e.selectMenu,style:{"--el-menu-border-color":"'#00000000'","margin-top":"10px"}},{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.items,(function(e){return Object(o["I"])(),Object(o["k"])(b,{key:e.id,index:e.path},{default:Object(o["hb"])((function(){return[Object(o["n"])("i",{class:Object(o["z"])(e.icon)},null,2),Object(o["p"])(Object(o["W"])(e.name),1)]})),_:2},1032,["index"])})),128))]})),_:1},8,["default-active","onSelect"])]})),_:1})):Object(o["l"])("",!0)}n("99af");var p=n("7864"),j=function e(){Object(l["a"])(this,e)};j.showError=function(e){Object(p["a"])({showClose:!0,message:e,type:"error"})},j.showSuccess=function(e){Object(p["a"])({showClose:!0,message:e,type:"success"})},j.showWarning=function(e){Object(p["a"])({showClose:!0,message:e,type:"warning"})};var h=function(e){return Object(o["M"])("data-v-7569cb65"),e=e(),Object(o["J"])(),e},_=h((function(){return Object(o["n"])("a",null,"友盟key管理",-1)})),g=Object(o["p"])("重置名称"),y=Object(o["p"])("刷新数据"),k=Object(o["p"])("友盟应用"),v=Object(o["p"])("编辑"),w=Object(o["p"])("移除"),q=Object(o["p"])("添加Key"),S={class:"dialog-footer"},C=Object(o["p"])("取消"),V=Object(o["p"])("更新配置"),x={class:"infinite-list"},F={style:{width:"80%","align-items":"flex-start"}},U={style:{width:"20%"}},T=Object(o["p"])("添加"),E=Object(o["p"])("移除");function z(e,t,n,c,l,a){var r=this,i=Object(o["S"])("el-col"),u=Object(o["S"])("el-button"),b=Object(o["S"])("el-row"),s=Object(o["S"])("el-header"),d=Object(o["S"])("el-divider"),m=Object(o["S"])("el-table-column"),f=Object(o["S"])("el-switch"),O=Object(o["S"])("el-table"),p=Object(o["S"])("el-empty"),j=Object(o["S"])("el-input"),h=Object(o["S"])("el-form-item"),z=Object(o["S"])("el-form"),K=Object(o["S"])("el-dialog"),N=Object(o["S"])("el-drawer"),I=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(I,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[_]})),_:1}),Object(o["q"])(i,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[0]||(t[0]=function(t){e.resetDisplayName=!0,e.refreshDrawer=!0,e.getUmApps(),e.getUmKeys(!0)})},{default:Object(o["hb"])((function(){return[g]})),_:1}),Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[1]||(t[1]=function(t){e.refreshDrawer=!0,e.getUmApps(),e.getUmKeys(!0)})},{default:Object(o["hb"])((function(){return[y]})),_:1}),Object(o["l"])("",!0),Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-menu",onClick:t[3]||(t[3]=function(t){e.showDrawer=!0,e.getUmApps()})},{default:Object(o["hb"])((function(){return[k]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(d),Object(o["ib"])(Object(o["q"])(O,{data:e.tableData,style:{width:"unset"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(m,{prop:"um_name",label:"显示名称",width:"300"}),Object(o["q"])(m,{prop:"um_key",label:"友盟key",width:"500"}),Object(o["q"])(m,{prop:"um_master",label:"是否Master"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(f,{modelValue:t.row.um_master,"onUpdate:modelValue":function(e){return t.row.um_master=e},"active-color":"#13ce66",onClick:function(n){return e.setMaster(t.$index,t.row)}},null,8,["modelValue","onUpdate:modelValue","onClick"])]})),_:1}),Object(o["q"])(m,{fixed:"right",label:"操作","min-width":"280",align:"right"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(u,{class:"el-button-right",type:"primary",size:"mini",onClick:function(n){return e.editUmKey(t.$index,t.row)},icon:"el-icon-edit"},{default:Object(o["hb"])((function(){return[v]})),_:2},1032,["onClick"]),Object(o["q"])(u,{class:"el-button-right",type:"danger",size:"mini",onClick:function(n){return e.deleteUmKey(t.$index,t.row)},icon:"el-icon-close"},{default:Object(o["hb"])((function(){return[w]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(p,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[4]||(t[4]=function(t){e.dialogFormVisible=!0,e.dialogCommitTitle="保存"})},{default:Object(o["hb"])((function(){return[q]})),_:1})]})),_:1},512),[[o["eb"],0==e.tableData.length]]),Object(o["q"])(K,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.dialogFormVisible=t}),title:"".concat(e.dialogCommitTitle,"key")},{footer:Object(o["hb"])((function(){return[Object(o["n"])("span",S,[Object(o["q"])(u,{onClick:t[8]||(t[8]=function(t){return e.dialogFormVisible=!1})},{default:Object(o["hb"])((function(){return[C]})),_:1}),Object(o["q"])(u,{type:"primary",onClick:e.addOrUpdateKey},{default:Object(o["hb"])((function(){return[Object(o["p"])(Object(o["W"])(e.dialogCommitTitle),1)]})),_:1},8,["onClick"])])]})),default:Object(o["hb"])((function(){return[Object(o["q"])(z,{model:e.form},{default:Object(o["hb"])((function(){return[Object(o["q"])(h,{label:"显示名称：","label-width":e.formLabelWidth},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{modelValue:e.form.um_name,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.um_name=t}),autocomplete:"off",placeholder:"key的别名",maxlength:"24","show-word-limit":"true"},null,8,["modelValue"])]})),_:1},8,["label-width"]),Object(o["q"])(h,{label:"友盟key：","label-width":e.formLabelWidth,required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{modelValue:e.form.um_key,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.um_key=t}),autocomplete:"off",minlength:"24",maxlength:"24","show-word-limit":"true",placeholder:"请输入24位长度的友盟key",clearable:"true",disabled:"更新"==e.dialogCommitTitle},null,8,["modelValue","disabled"])]})),_:1},8,["label-width"]),Object(o["q"])(h,{label:"是否Master：","label-width":e.formLabelWidth},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{span:6},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.um_master,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.um_master=t}),"active-color":"#13ce66"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(i,{span:6})]})),_:1})]})),_:1},8,["label-width"])]})),_:1},8,["model"])]})),_:1},8,["modelValue","title"]),Object(o["q"])(N,{modelValue:e.showDrawer,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.showDrawer=t}),title:"友盟应用列表",direction:"rtl","before-close":e.onDrawerClose},{default:Object(o["hb"])((function(){return[Object(o["ib"])(Object(o["q"])(p,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[10]||(t[10]=function(e){return r.$router.push("/other/config")})},{default:Object(o["hb"])((function(){return[V]})),_:1})]})),_:1},512),[[o["eb"],0==e.allKeyList.length]]),Object(o["n"])("ul",x,[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.allKeyList,(function(t){return Object(o["I"])(),Object(o["m"])("li",{key:t,class:"infinite-list-item"},[Object(o["n"])("a",F,Object(o["W"])(t.um_name),1),Object(o["n"])("div",U,[0==t.um_status?(Object(o["I"])(),Object(o["k"])(u,{key:0,size:"mini",type:"primary",icon:"el-icon-circle-plus-outline",onClick:function(n){t.um_status=1,e.addApp(t.um_name,t.um_key)}},{default:Object(o["hb"])((function(){return[T]})),_:2},1032,["onClick"])):Object(o["l"])("",!0),1==t.um_status?(Object(o["I"])(),Object(o["k"])(u,{key:1,size:"mini",type:"danger",icon:"el-icon-remove-outline",onClick:function(n){t.um_status=0,e.removeApp(t.um_name,t.um_key)}},{default:Object(o["hb"])((function(){return[E]})),_:2},1032,["onClick"])):Object(o["l"])("",!0)])])})),128))])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var K=function e(){Object(l["a"])(this,e)};K.BASE_URL="".concat(window.location.protocol,"//").concat(window.location.host),K.BASE_URL_SOCKET="ws://".concat(window.location.host),K.getUrl=function(e){var t="".concat(K.BASE_URL).concat(e);return console.log("url = ".concat(e,", newUrl=").concat(t)),t};n("d3b7"),n("a434");var N=n("bc3a"),I=n.n(N),A=I.a.create({baseURL:K.BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json;charset=UTF-8"},withCredentials:!0});A.interceptors.request.use((function(e){return P(e),e.cancelToken=new M((function(t){R.push({url:e.url,method:e.method,params:e.params,data:e.data,cancel:t})})),e.headers.Authorization=localStorage.getItem("token"),e}),(function(e){return L(e.data.error.message),Promise.reject(e.data.error.message)})),A.interceptors.response.use((function(e){return P(e.config),200===e.status||204===e.status?Promise.resolve(e):Promise.reject(e)}),(function(e){var t=e.response;if(t){D(t.status,t.data.message);var n=e.config,o=3,c=1e3;if(n&&o){if(n.__retryCount=n.__retryCount||0,n.__retryCount>=o)return Promise.reject(t||{message:e.message});n.__retryCount++;var l=new Promise((function(e){setTimeout((function(){e()}),c||1)}));return l.then((function(){return A(n)}))}return Promise.reject(t)}}));var L=function(e){j.showError(e)},D=function(e,t){switch(console.log("errorHandle ".concat(e," : ").concat(t)),e){case 302:L("请求已重定向");break;case 400:L("请求参数错误");break;case 401:L("登录信息已失效");break;case 403:L("授权信息已过期，请重新登录"),setTimeout((function(){}),1e3);break;case 404:L("当前请求不存在");break;case 406:L("请求的格式有误");break;case 408:L(" 请求超时");break;case 410:L("请求的资源被永久删除，且不会再得到");break;case 422:L("当创建一个对象时，发生一个验证错误");break;case 500:L("服务器异常，请稍候重试");break;case 502:L("网关错误");break;case 503:L("服务不可用，服务器暂时过载或维护");break;case 504:L("网关超时");break;default:L("其他错误错误");break}},R=[],M=I.a.CancelToken,P=function(e){for(var t in R){var n=+t,o=R[t],c=o.url===e.url&&o.method===e.method&&JSON.stringify(o.params)===JSON.stringify(e.params)&&JSON.stringify(o.data)===JSON.stringify(e.data);c&&(o.cancel("操作太频繁，请稍后再试"),R.splice(n,1))}},X=A,W=function e(){Object(l["a"])(this,e)};W.parseRes=function(e,t,n){if(console.log(e),200===e.data.code)t(e);else{switch(e.data.code){case 401:case 403:dt.push("/login");break;case 499:dt.push("/other/config");break;default:break}j.showError(e.data.msg),n(e)}},W.get=function(e,t){return new Promise((function(n,o){X.get(e,{params:t}).then((function(e){W.parseRes(e,n,o)})).catch((function(e){o(e)}))}))},W.post=function(e,t){return new Promise((function(n,o){X.post(e,JSON.stringify(t)).then((function(e){W.parseRes(e,n,o)})).catch((function(e){o(e)}))}))};var Y=function e(){Object(l["a"])(this,e)};Y.um={add_um_key:function(e){return W.post("/api/add_um_key",e)},get_um_keys:function(e){return W.post("/api/get_um_keys",e)},del_um_key:function(e){return W.post("/api/del_um_key",e)},um_key_master:function(e){return W.post("/api/um_key_master",e)},get_um_apps:function(){return W.get("/api/get_um_apps")},save_config:function(e){return W.post("/api/save_config",e)},get_config:function(){return W.get("/api/get_config")},add_kv:function(e){return W.post("/api/add_kv",e)},get_kvs:function(){return W.get("/api/get_kvs")},del_kv:function(e){return W.post("/api/del_kv",e)},kv_status:function(e){return W.post("/api/kv_status",e)},um_event:function(e){return W.post("/api/um_event",e)},um_event_export:function(e){return W.post("/api/um_event_export",e)},um_event_op:function(e){return W.post("/api/um_event_op",e)},um_event_import:"".concat(K.BASE_URL,"/api/um_event_import"),um_event_update:"".concat(K.BASE_URL,"/api/um_event_update"),um_socket:"".concat(K.BASE_URL_SOCKET,"/ws/um"),login:function(e){return W.post("/api/login",e)},reg:function(e){return W.post("/api/reg",e)}};var J=Object(o["r"])({created:function(){this.getUmKeys()},setup:function(){var e=Object(o["N"])({showDrawer:!1,refreshDrawer:!1,resetDisplayName:!1,allKeyList:[],tableData:[],dialogFormVisible:!1,form:{um_name:"",um_key:"",um_master:!1,um_status:0},formLabelWidth:"120px",dialogCommitTitle:"添加"}),t=function(){Y.um.get_um_keys({um_status:-1,reset_name:e.resetDisplayName,refresh:e.refreshDrawer||0==e.allKeyList.length}).then((function(t){e.allKeyList=t.data.data,e.refreshDrawer=!1,e.resetDisplayName=!1}))},n=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Y.um.get_um_keys({um_status:1,reset_name:e.resetDisplayName,refresh:e.refreshDrawer}).then((function(n){e.tableData=n.data.data,e.refreshDrawer=!1,e.resetDisplayName=!1,t&&j.showSuccess("操作成功")}))},c=function(t,n){console.log(t,n),e.form={um_name:n.um_name,um_key:n.um_key,um_master:n.um_master,um_status:n.um_status},e.dialogFormVisible=!0,e.dialogCommitTitle="更新"},l=function(){var t=/^[A-Za-z0-9]+$/;24==e.form.um_key.length&&t.test(e.form.um_key)?(e.dialogFormVisible=!1,console.log(JSON.stringify(e.form)),Y.um.add_um_key(e.form).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))):j.showError("请输入24位长度的友盟key（只能包含数字跟字母）")},a=function(t,n){console.log(n),e.form=n,e.form.um_status=0,l()},r=function(t,n){console.log(n),Y.um.um_key_master(n).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))},i=function(t,n){console.log("addApp: ".concat(t,"  ").concat(n," ")),e.form={um_name:t,um_key:n,um_master:!1,um_status:1},l()},u=function(t,n){console.log("removeApp: ".concat(t,"  ").concat(n," ")),e.form={um_name:t,um_key:n,um_master:!1,um_status:0},l()},b=function(){e.showDrawer=!1};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{addOrUpdateKey:l,getUmKeys:n,getUmApps:t,editUmKey:c,setMaster:r,deleteUmKey:a,onDrawerClose:b,addApp:i,removeApp:u})}}),H=(n("162c"),n("6b0d")),B=n.n(H);const G=B()(J,[["render",z],["__scopeId","data-v-7569cb65"]]);var Z=G,$=function(e){return Object(o["M"])("data-v-455d4f90"),e=e(),Object(o["J"])(),e},Q=$((function(){return Object(o["n"])("a",null,"友盟键值对管理",-1)})),ee=Object(o["p"])("添加Key"),te=Object(o["p"])("编辑"),ne=Object(o["p"])("删除"),oe=Object(o["p"])("添加Key"),ce={class:"dialog-footer"},le=Object(o["p"])("取消");function ae(e,t,n,c,l,a){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-row"),b=Object(o["S"])("el-header"),s=Object(o["S"])("el-divider"),d=Object(o["S"])("el-table-column"),m=Object(o["S"])("el-switch"),f=Object(o["S"])("el-table"),O=Object(o["S"])("el-empty"),p=Object(o["S"])("el-input"),j=Object(o["S"])("el-form-item"),h=Object(o["S"])("el-form"),_=Object(o["S"])("el-dialog"),g=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(g,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[Q]})),_:1}),Object(o["q"])(r,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[0]||(t[0]=function(t){e.dialogCommitTitle="保存",e.dialogFormVisible=!0})},{default:Object(o["hb"])((function(){return[ee]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(s),Object(o["ib"])(Object(o["q"])(f,{data:e.tableData,style:{width:"unset"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(d,{prop:"kv_name",label:"显示名称",width:"200"}),Object(o["q"])(d,{prop:"kv_key",label:"key",width:"300"}),Object(o["q"])(d,{prop:"kv_value",label:"值","show-overflow-tooltip":"true",width:"700"}),Object(o["q"])(d,{prop:"kv_status",label:"是否有效",width:"100"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(m,{modelValue:t.row.kv_status,"onUpdate:modelValue":function(e){return t.row.kv_status=e},"active-color":"#13ce66",onClick:function(n){return e.setKvStatus(t.$index,t.row)}},null,8,["modelValue","onUpdate:modelValue","onClick"])]})),_:1}),Object(o["q"])(d,{fixed:"right",label:"操作","min-width":"250",align:"right"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(i,{class:"el-button-right",type:"primary",size:"mini",onClick:function(n){return e.editKv(t.$index,t.row)},icon:"el-icon-edit"},{default:Object(o["hb"])((function(){return[te]})),_:2},1032,["onClick"]),Object(o["q"])(i,{class:"el-button-right",type:"danger",size:"mini",onClick:function(n){return e.deleteKv(t.$index,t.row)},icon:"el-icon-close"},{default:Object(o["hb"])((function(){return[ne]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(O,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(t){e.dialogCommitTitle="保存",e.dialogFormVisible=!0})},{default:Object(o["hb"])((function(){return[oe]})),_:1})]})),_:1},512),[[o["eb"],0==e.tableData.length]]),Object(o["q"])(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.dialogFormVisible=t}),title:"添加Key"},{footer:Object(o["hb"])((function(){return[Object(o["n"])("span",ce,[Object(o["q"])(i,{onClick:t[6]||(t[6]=function(t){return e.dialogFormVisible=!1})},{default:Object(o["hb"])((function(){return[le]})),_:1}),Object(o["q"])(i,{type:"primary",onClick:e.addOrUpdateKv},{default:Object(o["hb"])((function(){return[Object(o["p"])(Object(o["W"])(e.dialogCommitTitle),1)]})),_:1},8,["onClick"])])]})),default:Object(o["hb"])((function(){return[Object(o["q"])(h,{model:e.form},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{label:"显示名称：","label-width":e.formLabelWidth,required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(p,{modelValue:e.form.kv_name,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.kv_name=t}),autocomplete:"off",placeholder:"显示名的描述名",maxlength:"24","show-word-limit":"true"},null,8,["modelValue"])]})),_:1},8,["label-width"]),Object(o["q"])(j,{label:"key：","label-width":e.formLabelWidth,required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(p,{modelValue:e.form.kv_key,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.kv_key=t}),autocomplete:"off",placeholder:"key",maxlength:"24","show-word-limit":"true",disabled:"更新"==e.dialogCommitTitle},null,8,["modelValue","disabled"])]})),_:1},8,["label-width"]),Object(o["q"])(j,{label:"值：","label-width":e.formLabelWidth,required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(p,{modelValue:e.form.kv_value,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.kv_value=t}),autocomplete:"off",minlength:"0",maxlength:"5000","show-word-limit":"true",placeholder:"请输入key对应的值",clearable:"true"},null,8,["modelValue"])]})),_:1},8,["label-width"]),Object(o["q"])(j,{label:"是否有效：","label-width":e.formLabelWidth},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:6},{default:Object(o["hb"])((function(){return[Object(o["q"])(m,{modelValue:e.form.kv_status,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.kv_status=t}),"active-color":"#13ce66"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(r,{span:6})]})),_:1})]})),_:1},8,["label-width"])]})),_:1},8,["model"])]})),_:1},8,["modelValue"])]})),_:1})}var re=Object(o["r"])({created:function(){this.getKvs()},setup:function(){var e=Object(o["N"])({tableData:[],dialogFormVisible:!1,form:{kv_name:"",kv_key:"",kv_value:"",kv_status:!0},formLabelWidth:"120px",dialogCommitTitle:"添加"}),t=function(){var t=/^[A-Za-z0-9_-]+$/;e.form.kv_key.length<=0||!t.test(e.form.kv_key)?j.showError("kv_key不能为空 且 只能包含数字跟字母以及-_字符"):e.form.kv_value.length<=0?j.showError("值不能为空"):(e.dialogFormVisible=!1,console.log(JSON.stringify(e.form)),Y.um.add_kv(e.form).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)})))},n=function(){Y.um.get_kvs().then((function(t){e.tableData=t.data.data}))},c=function(t,n){console.log(t,n),e.form={kv_name:n.kv_name,kv_key:n.kv_key,kv_value:n.kv_value,kv_status:n.kv_status},e.dialogCommitTitle="更新",e.dialogFormVisible=!0},l=function(t,n){console.log(n),Y.um.del_kv(n).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))},a=function(t,n){console.log(n),Y.um.kv_status(n).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{addOrUpdateKv:t,getKvs:n,editKv:c,setKvStatus:a,deleteKv:l})}});n("528e");const ie=B()(re,[["render",ae],["__scopeId","data-v-455d4f90"]]);var ue=ie,be=Object(o["n"])("a",null,"配置管理",-1),se=Object(o["p"])("友盟官网（去登录获取cookie等）"),de=Object(o["p"])("保存");function me(e,t,n,c,l,a){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-row"),b=Object(o["S"])("el-header"),s=Object(o["S"])("el-divider"),d=Object(o["S"])("el-step"),m=Object(o["S"])("el-steps"),f=Object(o["S"])("el-input"),O=Object(o["S"])("el-form-item"),p=Object(o["S"])("el-form"),j=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(j,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[be]})),_:1}),Object(o["q"])(r,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",type:"primary",icon:"el-icon-setting",onClick:e.login},{default:Object(o["hb"])((function(){return[se]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(s),Object(o["q"])(m,{active:3,"finish-status":"success",simple:"true",style:{"margin-left":"40px","margin-right":"40px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(d,{title:"登录友盟官网",onClick:e.login},null,8,["onClick"]),Object(o["q"])(d,{title:"F12控制台复制参数",onClick:e.login},null,8,["onClick"]),Object(o["q"])(d,{title:"保存配置",onClick:e.addOrUpdateKv},null,8,["onClick"])]})),_:1}),Object(o["q"])(p,{"label-position":e.right,"label-width":"150px",model:e.form,style:{margin:"20px",width:"96.5%"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(O,{label:"CONTENT_TYPE",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.CONTENT_TYPE,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.CONTENT_TYPE=t}),placeholder:"【必填】默认值为application/json;charset=UTF-8"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(O,{label:"USER_AGENT",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.USER_AGENT,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.USER_AGENT=t}),placeholder:"【必填】请求头中的[user-agent]字段内容"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(O,{label:"COOKIE",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.COOKIE,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.COOKIE=t}),placeholder:"【必填】友盟那边登录成功后请求头中的[cookie]字段内容"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(O,{label:"X_XSRF_TOKEN"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.X_XSRF_TOKEN,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.X_XSRF_TOKEN=t}),placeholder:"【不用手动填】会自动从cookie中的[XSRF-TOKEN]中读取，如果取不到，请检查是否登录后的cookie"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(O,{label:"X_XSRF_HAITANG"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.X_XSRF_HAITANG,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.X_XSRF_HAITANG=t}),placeholder:"【不用手动填】会自动从cookie中的[XSRF-TOKEN-HAITANG]中读取，如果取不到，请检查是否登录后的cookie"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["label-position","model"]),Object(o["q"])(i,{type:"primary",size:"mini",onClick:e.addOrUpdateKv,icon:"el-icon-upload",style:{"margin-left":"45%","margin-right":"45%"}},{default:Object(o["hb"])((function(){return[de]})),_:1},8,["onClick"])]})),_:1})}n("159b"),n("ac1f"),n("1276"),n("841c");var fe=Object(o["r"])({components:{},created:function(){this.getConfig()},setup:function(){var e=Object(o["N"])({form:{CONTENT_TYPE:"application/json;charset=UTF-8",USER_AGENT:"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36",X_XSRF_TOKEN:"",X_XSRF_HAITANG:"",COOKIE:"",UM_KEY_MASTER:"",UM_KEY_SLAVES:[]}}),t=function(){console.log(e.form.COOKIE),e.form.COOKIE.split(";").forEach((function(t){-1!=t.search("XSRF-TOKEN-HAITANG")?e.form.X_XSRF_HAITANG=t.split("=")[1]:-1!=t.search("XSRF-TOKEN")&&(e.form.X_XSRF_TOKEN=t.split("=")[1])})),console.log(JSON.stringify(e.form)),Y.um.save_config(e.form).then((function(e){j.showSuccess(e.data.msg)}))},n=function(){Y.um.get_config().then((function(t){e.form=t.data.data}))},c=function(){console.log("点击login"),window.open("https://mobile.umeng.com/platform/apps/list","_blank")};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{addOrUpdateKv:t,getConfig:n,login:c})}});const Oe=B()(fe,[["render",me]]);var pe=Oe,je=function(e){return Object(o["M"])("data-v-9892dd52"),e=e(),Object(o["J"])(),e},he={class:"login-from"},_e=je((function(){return Object(o["n"])("a",{class:"login-tag"},"登录",-1)})),ge=Object(o["p"])("登录"),ye=je((function(){return Object(o["n"])("a",{class:"login-tag"},"注册",-1)})),ke=Object(o["p"])("注册"),ve=je((function(){return Object(o["n"])("br",null,null,-1)}));function we(e,t,n,c,l,a){var r=Object(o["S"])("el-input"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-form"),b=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(b,{direction:"vertical",class:"login-bg"},{default:Object(o["hb"])((function(){return[Object(o["n"])("div",he,[e.showLogin?(Object(o["I"])(),Object(o["k"])(u,{key:0,ref:"form",model:e.loginForm,"label-width":"120px","label-position":"right"},{default:Object(o["hb"])((function(){return[_e,Object(o["q"])(r,{class:"login-input",modelValue:e.loginForm.u_name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.loginForm.u_name=t}),placeholder:"用户名/手机号",clearable:"true","prefix-icon":"el-icon-mobile-phone"},null,8,["modelValue"]),Object(o["q"])(r,{class:"login-input",modelValue:e.loginForm.u_pw,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.loginForm.u_pw=t}),placeholder:"长度6位及以上的密码",clearable:"true",type:"password","show-password":"true",minlength:"6",maxlength:"20","prefix-icon":"el-icon-tickets"},null,8,["modelValue"]),Object(o["q"])(i,{class:"login-bt",type:"primary",size:"mini",onClick:t[2]||(t[2]=function(t){return e.doLogin()})},{default:Object(o["hb"])((function(){return[ge]})),_:1}),Object(o["n"])("a",{class:"login-other",size:"mini",onClick:t[3]||(t[3]=function(t){e.showReg=!0,e.showLogin=!1})},"没有账户，去注册")]})),_:1},8,["model"])):Object(o["l"])("",!0),e.showReg?(Object(o["I"])(),Object(o["k"])(u,{key:1,ref:"form",model:e.regForm,"label-width":"0px","label-position":"right"},{default:Object(o["hb"])((function(){return[ye,Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_name,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.regForm.u_name=t}),placeholder:"用户名【选填】",clearable:"true","prefix-icon":"el-icon-info"},null,8,["modelValue"]),Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_phone,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.regForm.u_phone=t}),placeholder:"请输入手机号【必填】",clearable:"true",maxlength:"11","prefix-icon":"el-icon-mobile-phone"},null,8,["modelValue"]),Object(o["l"])("",!0),Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_pw,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.regForm.u_pw=t}),placeholder:"长度6位及以上的密码【必填】",clearable:"true",type:"password","show-password":"true",minlength:"6",maxlength:"20","prefix-icon":"el-icon-tickets"},null,8,["modelValue"]),Object(o["q"])(i,{class:"login-bt",type:"primary",size:"mini",onClick:t[8]||(t[8]=function(t){return e.doReg()})},{default:Object(o["hb"])((function(){return[ke]})),_:1}),ve,Object(o["n"])("a",{class:"login-other",size:"mini",onClick:t[9]||(t[9]=function(t){e.showReg=!1,e.showLogin=!0})},"已有账号，去登录")]})),_:1},8,["model"])):Object(o["l"])("",!0)])]})),_:1})}var qe=Object(o["r"])({created:function(){var e=localStorage.getItem("u_name")||"",t=localStorage.getItem("u_pw")||"";this.loginForm.u_name=e,this.loginForm.u_pw=t},setup:function(){var e=Object(o["N"])({bgSrc:"/bg.png",showLogin:!0,loginForm:{u_name:"",u_pw:""},regLogin:!1,regForm:{u_name:"",u_pw:"",u_phone:"",u_email:"",u_code:"666666"}}),t=function(){Y.um.login(e.loginForm).then((function(t){0!=e.loginForm.u_name.length?e.loginForm.u_pw.length<6?j.showWarning("请输入6位及以上长度密码"):(c(t),localStorage.setItem("u_pw",e.loginForm.u_pw)):j.showWarning("请输入账号")}))},n=function(){11==e.regForm.u_phone.length?e.regForm.u_pw.length<6?j.showWarning("请输入6位及以上长度密码"):Y.um.reg(e.regForm).then((function(t){c(t),localStorage.setItem("u_pw",e.regForm.u_pw)})):j.showWarning("请输入正确的手机号")},c=function(e){j.showSuccess(e.data.msg),localStorage.setItem("token",e.data.data.u_token),localStorage.setItem("u_id",e.data.data.u_id),localStorage.setItem("u_name",e.data.data.u_name),dt.push("/home")};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{doLogin:t,doReg:n,parseSucceed:c})}});n("d0a5");const Se=B()(qe,[["render",we],["__scopeId","data-v-9892dd52"]]);var Ce=Se,Ve=function(e){return Object(o["M"])("data-v-83af7a26"),e=e(),Object(o["J"])(),e},xe=Ve((function(){return Object(o["n"])("a",null,"任务管理",-1)})),Fe=Object(o["p"])("上传/更新事件"),Ue=Object(o["p"])("执行【同步】任务"),Te=Ve((function(){return Object(o["n"])("div",{class:"el-upload__text"},[Object(o["p"])(" 拖拽文件到这里 "),Object(o["n"])("em",null," 或点击上传 ")],-1)}));function Ee(e,t,n,c,l,a){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-row"),b=Object(o["S"])("el-header"),s=Object(o["S"])("el-divider"),d=Object(o["S"])("el-timeline-item"),m=Object(o["S"])("el-timeline"),f=Object(o["S"])("el-upload"),O=Object(o["S"])("el-dialog"),p=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(p,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[xe]})),_:1}),Object(o["q"])(r,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["l"])("",!0),Object(o["l"])("",!0),Object(o["l"])("",!0),Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[3]||(t[3]=function(t){e.dialogFormVisible=!0})},{default:Object(o["hb"])((function(){return[Fe]})),_:1}),Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-phone",onClick:t[4]||(t[4]=function(t){return e.startSynTask()})},{default:Object(o["hb"])((function(){return[Ue]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(s),Object(o["q"])(m,null,{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.timeLineList,(function(e,t){return Object(o["I"])(),Object(o["k"])(d,{style:{"text-align":"left"},key:t,timestamp:e.timestamp,center:!1},{default:Object(o["hb"])((function(){return[Object(o["p"])(Object(o["W"])(e.content),1)]})),_:2},1032,["timestamp"])})),128))]})),_:1}),Object(o["q"])(O,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dialogFormVisible=t}),title:"上传事件"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{ref:"upload",action:e.uploadUrl,"on-success":e.handleUploadSucceed,"file-list":e.fileList,"show-file-list":!1,multiple:"false",drag:"true",data:e.umConfig.UM_KEY_MASTER},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",icon:"el-icon-upload",style:{"background-color":"transparent",border:"0px"}}),Te]})),_:1},8,["action","on-success","file-list","data"])]})),_:1},8,["modelValue"])]})),_:1})}var ze=null,Ke=null,Ne=Object(o["r"])({components:{},created:function(){this.getConfig()},beforeUnmount:function(){this.closeWebsocket(),ze=null},setup:function(){var e=Object(o["N"])({umConfig:{CONTENT_TYPE:"",USER_AGENT:"",X_XSRF_TOKEN:"",X_XSRF_HAITANG:"",COOKIE:"",UM_KEY_MASTER:"",UM_KEY_SLAVES:[]},taskType:"",timeLineList:[{content:"暂无在执行任务",timestamp:""},{content:"请点击右上角执行相应的任务",timestamp:""}],dialogFormVisible:!1,fileList:[],uploadUrl:Y.um.um_event_update}),t=function(){return(new Date).toDateString()},n=function(){e.taskType="",m({type:"stop",config:e.umConfig})},c=function(){e.taskType="syn",a(e.taskType)},l=function(){e.taskType="update",a(e.taskType)},a=function(t){if(e.timeLineList=[],e.taskType=t,f()){var n={type:t,config:e.umConfig};m(n)}},r=function(n){console.log("websocketOnMessage date=",n);var o=n.data;e.timeLineList.push({content:o,timestamp:t()}),"任务执行完毕"==o&&(e.taskType="")},i=function(){if(console.log("websocketOnOpen"),m({type:"connect",config:e.umConfig}),null!=e.taskType&&""!=e.taskType){var t={type:e.taskType,config:e.umConfig};m(t)}},u=function(){console.log("websocketOnConnect")},b=function(){console.log("websocketOnError"),f()},d=function(e){console.log("websocketOnClose 断开连接 e=",e)},m=function(e){console.log("websocketSend data=",e),null!=ze&&null!=e&&ze.send(JSON.stringify(e))},f=function(){return ze=new WebSocket(Y.um.um_socket),ze.onmessage=r,ze.onopen=i,ze.onconnect=u,ze.onerror=b,ze.onclose=d,!0},O=function(){null!=ze&&ze.close(),console.log("销毁 websocket 实例对象")},p=function(){Ke=setInterval((function(){console.log(1)}),1e3)},h=function(){clearInterval(Ke)},_=function(){Y.um.get_config().then((function(t){e.umConfig=t.data.data}))},g=function(t,n,o){e.dialogFormVisible=!1,console.log("handleUploadSucceed ".concat(t).concat(n," ").concat(o)),j.showSuccess("上传成功，开始同步更新友盟事件"),l()};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{stopTask:n,startTask:a,startSynTask:c,startUpdateTask:l,initWebsocket:f,closeWebsocket:O,websocketOnMessage:r,websocketOnOpen:i,websocketOnConnect:u,websocketOnError:b,websocketOnClose:d,websocketSend:m,getCurrDate:t,getConfig:_,startTimer:p,stopTimer:h,handleUploadSucceed:g})}});n("800d");const Ie=B()(Ne,[["render",Ee],["__scopeId","data-v-83af7a26"]]);var Ae=Ie,Le=function(e){return Object(o["M"])("data-v-4109c1f6"),e=e(),Object(o["J"])(),e},De=Le((function(){return Object(o["n"])("a",null,"事件管理",-1)})),Re=Object(o["p"])("官网链接"),Me=Object(o["p"])("刷新"),Pe=Object(o["p"])("批量暂停"),Xe=Object(o["p"])("批量恢复"),We=Object(o["p"])("上传事件"),Ye=Object(o["p"])("导出事件"),Je=Object(o["p"])("事件筛选"),He=Object(o["p"])("上传事件"),Be=Le((function(){return Object(o["n"])("div",{class:"el-upload__text"},[Object(o["p"])(" 拖拽文件到这里 "),Object(o["n"])("em",null," 或点击上传 ")],-1)})),Ge=Object(o["p"])(" ~ "),Ze=Object(o["p"])(" ~ "),$e=Object(o["p"])(" ~ "),Qe=Object(o["p"])("查询所有数量为 0 的事件"),et={style:{display:"flex","align-items":"flex-start","margin-left":"50px"}},tt=Object(o["p"])("重置"),nt=Object(o["p"])("提交");function ot(e,t,n,c,l,a){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-option"),u=Object(o["S"])("el-select"),b=Object(o["S"])("el-button"),s=Object(o["S"])("el-row"),d=Object(o["S"])("el-header"),m=Object(o["S"])("el-divider"),f=Object(o["S"])("el-table-column"),O=Object(o["S"])("el-table"),p=Object(o["S"])("el-pagination"),j=Object(o["S"])("el-empty"),h=Object(o["S"])("el-upload"),_=Object(o["S"])("el-dialog"),g=Object(o["S"])("el-input"),y=Object(o["S"])("el-form-item"),k=Object(o["S"])("el-input-number"),v=Object(o["S"])("el-form"),w=Object(o["S"])("el-drawer"),q=Object(o["S"])("el-backtop"),S=Object(o["S"])("el-container"),C=Object(o["T"])("loading");return Object(o["I"])(),Object(o["k"])(S,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(d,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[De]})),_:1}),Object(o["q"])(r,{span:20,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.query.um_key,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.query.um_key=t}),placeholder:"Select",size:"mini",style:{"margin-right":"20px"},onChange:e.onUmKeyChange},{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.umKeys,(function(e){return Object(o["I"])(),Object(o["k"])(i,{key:e.um_key,label:e.um_name,value:e.um_key},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-info",onClick:t[1]||(t[1]=function(t){return e.openUmLink()})},{default:Object(o["hb"])((function(){return[Re]})),_:1}),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[2]||(t[2]=function(t){e.query.refresh=1,e.query.pg_index=1,e.getUmEvents()})},{default:Object(o["hb"])((function(){return[Me]})),_:1}),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-delete",onClick:t[3]||(t[3]=function(t){return e.parseEventOp(0)})},{default:Object(o["hb"])((function(){return[Pe]})),_:1}),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[4]||(t[4]=function(t){return e.parseEventOp(1)})},{default:Object(o["hb"])((function(){return[Xe]})),_:1}),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-upload2",onClick:t[5]||(t[5]=function(t){e.dialogFormVisible=!0})},{default:Object(o["hb"])((function(){return[We]})),_:1}),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-download",onClick:e.exportCurrEvents},{default:Object(o["hb"])((function(){return[Ye]})),_:1},8,["onClick"]),Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-sort",onClick:t[6]||(t[6]=function(t){e.showDrawer=!0})},{default:Object(o["hb"])((function(){return[Je]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(m),Object(o["ib"])(Object(o["q"])(O,{data:e.tableData,onSelectionChange:e.handleSelectionChange,style:{width:"unset"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{type:"selection"}),Object(o["q"])(f,{type:"index"}),Object(o["q"])(f,{prop:"um_name",sortable:"",label:"事件id",width:"300"}),Object(o["q"])(f,{prop:"um_displayName",sortable:"",label:"事件名称",width:"300"}),Object(o["q"])(f,{prop:"um_eventType",sortable:"",label:"事件类型",width:"130"}),Object(o["q"])(f,{prop:"um_countYesterday",sortable:"",label:"昨日消息数",width:"130"}),Object(o["q"])(f,{prop:"um_countToday",sortable:"",label:"今日消息数",width:"130"}),Object(o["q"])(f,{prop:"um_deviceYesterday",sortable:"",label:"昨日独立用户数"})]})),_:1},8,["data","onSelectionChange"]),[[C,e.loading],[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(p,{layout:"total, sizes, prev, pager, next, jumper","current-page":e.query.pg_index,"page-size":e.query.pg_size,"page-sizes":[15,30,50,120,200,300,400,500,600,700,800,900,1e3,2e3],total:e.total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:e.onCurrentPageChange,onSizeChange:e.onPageSizeChange,style:{margin:"30px"}},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"]),[[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(j,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-upload",onClick:t[7]||(t[7]=function(t){e.dialogFormVisible=!0})},{default:Object(o["hb"])((function(){return[He]})),_:1})]})),_:1},512),[[o["eb"],0==e.tableData.length]]),Object(o["q"])(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.dialogFormVisible=t}),title:"上传事件"},{default:Object(o["hb"])((function(){return[Object(o["q"])(h,{ref:"upload",action:e.uploadUrl,"on-success":e.handleUploadSucceed,"file-list":e.fileList,"show-file-list":!1,multiple:"false",drag:"true",data:e.query.um_key},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{size:"mini",icon:"el-icon-upload",style:{"background-color":"transparent",border:"0px"}}),Be]})),_:1},8,["action","on-success","file-list","data"])]})),_:1},8,["modelValue"]),Object(o["q"])(w,{modelValue:e.showDrawer,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.showDrawer=t}),title:"事件筛选",direction:"rtl","before-close":e.onFilterSubmit},{default:Object(o["hb"])((function(){return[Object(o["q"])(v,{ref:"form",model:e.filterForm,"label-width":"120px","label-position":"right",style:{"margin-right":"40px","margin-top":"10px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(y,{label:"关键词",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(g,{modelValue:e.filterForm.keyword,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.filterForm.keyword=t}),class:"el-input-filter",style:{width:"100%",height:"35px"},size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(y,{label:"事件状态",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.state,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.filterForm.state=t}),placeholder:"请选择事件状态",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"不限状态",value:""}),Object(o["q"])(i,{label:"有效事件",value:"normal"}),Object(o["q"])(i,{label:"暂停事件",value:"stopped"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"事件类型",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.type,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.filterForm.type=t}),placeholder:"请选择事件类型",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"不限类型",value:""}),Object(o["q"])(i,{label:"多参数类型事件",value:"0"}),Object(o["q"])(i,{label:"计算事件",value:"1"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"排序字段",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.order_by,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.filterForm.order_by=t}),placeholder:"请选择排序字段",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"事件id",value:"um_name"}),Object(o["q"])(i,{label:"事件名称",value:"um_displayName"}),Object(o["q"])(i,{label:"昨日消息数",value:"um_countYesterday"}),Object(o["q"])(i,{label:"今日消息数",value:"um_countToday"}),Object(o["q"])(i,{label:"昨日独立用户数",value:"um_deviceYesterday"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"排序方式",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.order,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.filterForm.order=t}),placeholder:"请选择排序方式",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"降序",value:"desc"}),Object(o["q"])(i,{label:"升序",value:"asc"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"昨日数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.yesterday_min,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.filterForm.count_limit.yesterday_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),Ge,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.yesterday_max,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.filterForm.count_limit.yesterday_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"今日数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.today_min,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.filterForm.count_limit.today_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),Ze,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.today_max,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.filterForm.count_limit.today_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"用户数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.device_min,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.filterForm.count_limit.device_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),$e,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.device_max,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.filterForm.count_limit.device_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"数量筛选",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{onClick:e.queryAllZeroEvent,size:"small"},{default:Object(o["hb"])((function(){return[Qe]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(o["n"])("div",et,[Object(o["q"])(b,{class:"el-button-filter",onClick:e.onFilterReset,size:"small"},{default:Object(o["hb"])((function(){return[tt]})),_:1},8,["onClick"]),Object(o["q"])(b,{class:"el-button-filter",type:"primary",onClick:e.onFilterSubmit,size:"small"},{default:Object(o["hb"])((function(){return[nt]})),_:1},8,["onClick"])])]})),_:1},8,["model"])]})),_:1},8,["modelValue","before-close"]),Object(o["q"])(q,{bottom:50})]})),_:1})}var ct=n("b85c"),lt=(n("4de4"),n("21a6")),at=Object(o["r"])({created:function(){this.onFilterReset(),this.getUmKeys()},setup:function(){var e=Object(o["N"])({filterForm:{keyword:"",order_by:"um_deviceYesterday",order:"desc",state:"normal",type:"1",count_limit:{}},showDrawer:!1,umKeys:[],fileList:[],uploadUrl:Y.um.um_event_import,loading:!0,tableData:[{um_key:"",um_eventId:"",um_name:"",um_displayName:"",um_status:"",um_eventType:0,um_countToday:0,um_countYesterday:0,um_deviceYesterday:0}],dialogFormVisible:!1,form:{um_key:"",um_eventId:"",um_name:"",um_displayName:"",um_status:"",um_eventType:0,um_countToday:0,um_countYesterday:0,um_deviceYesterday:0},query:{um_key:"",refresh:0,pg_index:1,pg_size:15,filter:{}},total:50,formLabelWidth:"120px",dialogCommitTitle:"添加",ids:[""]}),t=function(){Y.um.get_um_keys({um_status:1,refresh:!1}).then((function(t){t.data.data.length>0&&(e.umKeys=t.data.data,e.query.um_key=t.data.data[0].um_key,n())})).catch((function(){e.tableData=[],e.loading=!1}))},n=function(){e.loading=!0,Y.um.um_event(e.query).then((function(t){e.tableData=t.data.data.lst,e.total=t.data.data.total,e.query.refresh=0,e.loading=!1})).catch((function(){e.tableData=[],e.loading=!1}))},c=function(t,n){console.log(t,n),e.form={um_key:n.um_key,um_eventId:n.um_eventId,um_name:n.um_name,um_displayName:n.um_displayName,um_status:n.um_status,um_eventType:n.um_eventType,um_countToday:n.um_countToday,um_countYesterday:n.um_countYesterday,um_deviceYesterday:n.um_deviceYesterday},e.dialogFormVisible=!0,e.dialogCommitTitle="更新"},l=function(t){if(0!=e.ids.length&&""!=e.ids[0]){var o={um_key:e.query.um_key,op_type:t,ids:e.ids};Y.um.um_event_op(o).then((function(){n()}))}else j.showWarning("请先选择要操作的数据")},a=function(){console.log("添加或更新单条事件")},r=function(){var t,n="",o=Object(ct["a"])(e.tableData);try{for(o.s();!(t=o.n()).done;){var c=t.value;n=n.length>0?"".concat(n,"\n").concat(c.um_name,",").concat(c.um_displayName,",").concat(c.um_eventType):"".concat(c.um_name,",").concat(c.um_displayName,",").concat(c.um_eventType)}}catch(a){o.e(a)}finally{o.f()}var l=new Blob([n],{type:"text/plain;charset=utf-8"});Object(lt["saveAs"])(l,"友盟自定义事件_".concat(e.query.um_key,".txt"))},i=function(){Y.um.um_event_export(e.query).then((function(t){var n=new Blob([t.data.data],{type:"text/plain;charset=utf-8"});Object(lt["saveAs"])(n,"友盟自定义事件_".concat(e.query.um_key,".txt"))}))},u=function(t){console.log("onCurrentPageChange ".concat(t)),e.query.pg_index=t,n()},b=function(t){console.log("onPageSizeChange ".concat(t)),e.query.pg_index=1,e.query.pg_size=t,n()},d=function(t){console.log(t),e.ids=[];var n,o=Object(ct["a"])(t);try{for(o.s();!(n=o.n()).done;){var c=n.value;e.ids.push(c.um_eventId)}}catch(l){o.e(l)}finally{o.f()}console.log(e.ids)},m=function(t,n,o){e.dialogFormVisible=!1,console.log("handleUploadSucceed ".concat(t).concat(n," ").concat(o)),j.showSuccess("上传成功")},f=function(t){console.log("onUmKeyChange ".concat(t)),e.query.pg_index=1,n()},O=function(){console.log("onFilterReset"),e.filterForm={keyword:"",order_by:"um_deviceYesterday",order:"desc",state:"normal",type:"1",count_limit:{yesterday_min:void 0,yesterday_max:void 0,today_min:void 0,today_max:void 0,device_min:void 0,device_max:void 0}}},p=function(){e.filterForm.count_limit={yesterday_min:0,yesterday_max:0,today_min:0,today_max:0,device_min:0,device_max:0},h()},h=function(){console.log("onFilterSubmit ".concat(e.filterForm)),console.log(e.filterForm),e.showDrawer=!1,e.query.filter=e.filterForm,n()},_=function(){window.open("https://mobile.umeng.com/platform/".concat(e.query.um_key,"/function/events/dashboard"),"_blank")};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{getUmKeys:t,getUmEvents:n,editHost:c,parseEventOp:l,addOrUpdateEvent:a,onCurrentPageChange:u,onPageSizeChange:b,exportCurrEvents:r,exportAllEvents:i,handleSelectionChange:d,handleUploadSucceed:m,onUmKeyChange:f,onFilterSubmit:h,onFilterReset:O,queryAllZeroEvent:p,openUmLink:_})}});n("ada5");const rt=B()(at,[["render",ot],["__scopeId","data-v-4109c1f6"]]);var it=rt,ut=n("6c02"),bt=[{path:"/",redirect:"/home",name:"首页"},{path:"/home",component:Z,name:"友盟Key"},{path:"/other/task",component:Ae,name:"任务管理"},{path:"/other/kvManage",component:ue,name:"键值管理"},{path:"/other/events",component:it,name:"事件管理",meta:{keepAlive:!0}},{path:"/other/config",component:pe,name:"配置管理"},{path:"/login",component:Ce,name:"注册登录"}],st=Object(ut["a"])({history:Object(ut["b"])(),routes:bt}),dt=st,mt=Object(o["r"])({created:function(){console.log("created")},mounted:function(){console.log("mounted"),this.parseNameInfo(),this.checkCurrPathByUrl()},watch:{$route:function(e,t){console.log("$route 路由发生变化 ".concat(e," ").concat(t)),this.currPath=e.path,console.log("this.currPath = ".concat(this.currPath)),this.parseNameInfo(),this.checkCurrPathByUrl()}},setup:function(){var e=Object(o["N"])({showLeftMenu:!0,u_name:"登录",currPath:"/home",items:[{name:"友盟KEY",id:"1",icon:"el-icon-menu",path:"/home"},{name:"配置管理",id:"2",icon:"el-icon-edit-outline",path:"/other/config"},{name:"任务管理",id:"3",icon:"el-icon-time",path:"/other/task"},{name:"事件管理",id:"4",icon:"el-icon-date",path:"/other/events"}]}),t=function(){var t=localStorage.getItem("u_name")||"";t.length>7&&(t="".concat(t.substr(0,3),"...").concat(t.substr(t.length-2,t.length))),e.u_name=t},n=function(t,n){e.currPath=n,console.log("index=".concat(t,"     indexPath=").concat(n))},c=function(){j.showWarning("请重新登录"),localStorage.setItem("token",""),dt.push("/login")},l=function(){var t=-1!=window.location.href.indexOf("/login");e.showLeftMenu&&t?(console.log("checkCurrPathByUrl 在登录页面，需要隐藏左侧菜单"),e.showLeftMenu=!1):e.showLeftMenu||t||(console.log("checkCurrPathByUrl 不在登录页面，需要显示左侧菜单"),e.showLeftMenu=!0)};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{selectMenu:n,loginOut:c,parseNameInfo:t,checkCurrPathByUrl:l})}});n("dbaa");const ft=B()(mt,[["render",O],["__scopeId","data-v-c2b80158"]]);var Ot=ft,pt=Object(o["r"])({components:{HomeLeftAside:Ot},watch:{$route:"fetchData"},created:function(){this.fetchData()},setup:function(){var e=Object(o["N"])({showMenu:!1}),t=function(){e.showMenu=-1==window.location.href.indexOf("/login")};return Object(s["a"])(Object(s["a"])({},Object(o["Z"])(e)),{},{fetchData:t})}});const jt=B()(pt,[["render",b]]);var ht=jt,_t=function(e){Object(a["a"])(n,e);var t=Object(r["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return n}(u["b"]);_t=Object(i["a"])([Object(u["a"])({components:{HomeView:ht},name:"App"})],_t);var gt=_t;n("da54");const yt=B()(gt,[["render",c]]);var kt=yt,vt=(n("c69f"),n("3ef0")),wt=n.n(vt),qt=function(e){e.use(p["b"],{locale:wt.a})},St=Object(o["j"])(kt);qt(St),St.use(dt),St.mount("#app")},d0a5:function(e,t,n){"use strict";n("96e1")},da54:function(e,t,n){"use strict";n("5e32")},dbaa:function(e,t,n){"use strict";n("4137")},eef8:function(e,t,n){}});