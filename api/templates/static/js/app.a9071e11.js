(function(e){function t(t){for(var o,l,r=t[0],i=t[1],u=t[2],b=0,m=[];b<r.length;b++)l=r[b],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&m.push(c[l][0]),c[l]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);s&&s(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},c={app:0},a=[];function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var s=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0231":function(e,t,n){},"031e":function(e,t,n){"use strict";n("b5ab")},"253a":function(e,t,n){},"27cf":function(e,t,n){"use strict";n("0231")},"59be":function(e,t,n){"use strict";n("253a")},"5e32":function(e,t,n){},b5ab:function(e,t,n){},b855:function(e,t,n){"use strict";n("fe86")},c69f:function(e,t,n){},c854:function(e,t,n){"use strict";n("d921")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,a,l){var r=Object(o["S"])("HomeView");return Object(o["I"])(),Object(o["k"])(r)}var a=n("d4ec"),l=n("262e"),r=n("2caf"),i=n("9ab4"),u=n("ce1f");function s(e,t,n,c,a,l){var r=Object(o["S"])("HomeLeftAside"),i=Object(o["S"])("router-view"),u=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(u,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(r),Object(o["q"])(u,{style:{"background-color":"#f4f4f4"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{style:{"background-color":"#ffffff"}})]})),_:1})]})),_:1})}var b=n("5530"),m=(n("b0c0"),function(e){return Object(o["M"])("data-v-44dd5edb"),e=e(),Object(o["J"])(),e}),d=m((function(){return Object(o["n"])("i",{class:"el-icon-info"},null,-1)})),f=Object(o["p"])("退出登录");function p(e,t,n,c,a,l){var r=Object(o["S"])("el-dropdown-item"),i=Object(o["S"])("el-dropdown-menu"),u=Object(o["S"])("el-dropdown"),s=Object(o["S"])("el-menu-item"),b=Object(o["S"])("el-menu"),m=Object(o["S"])("el-aside");return e.showLeftMenu?(Object(o["I"])(),Object(o["k"])(m,{key:0,width:"180px",style:{"text-align":"left"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini","split-button":"true",type:"primary",placement:"bottom-end",trigger:"click",style:{"padding-left":"20px","padding-bottom":"0px"}},{dropdown:Object(o["hb"])((function(){return[Object(o["q"])(i,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{onClick:e.loginOut,icon:"el-icon-back"},{default:Object(o["hb"])((function(){return[f]})),_:1},8,["onClick"])]})),_:1})]})),default:Object(o["hb"])((function(){return[d,Object(o["p"])(" "+Object(o["W"])(e.u_name)+" ",1)]})),_:1}),Object(o["q"])(b,{"text-color":"#ffffff","active-text-color":"#409EFF","background-color":"#00000000",router:!0,"default-active":e.currPath,onSelect:e.selectMenu,style:{"--el-menu-border-color":"'#00000000'","margin-top":"10px"}},{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.items,(function(e){return Object(o["I"])(),Object(o["k"])(s,{key:e.id,index:e.path},{default:Object(o["hb"])((function(){return[Object(o["n"])("i",{class:Object(o["z"])(e.icon)},null,2),Object(o["p"])(Object(o["W"])(e.name),1)]})),_:2},1032,["index"])})),128))]})),_:1},8,["default-active","onSelect"])]})),_:1})):Object(o["l"])("",!0)}n("99af");var O=n("7864"),j=function e(){Object(a["a"])(this,e)};j.showError=function(e){Object(O["a"])({showClose:!0,message:e,type:"error"})},j.showSuccess=function(e){Object(O["a"])({showClose:!0,message:e,type:"success"})},j.showWarning=function(e){Object(O["a"])({showClose:!0,message:e,type:"warning"})};var h=function(e){return Object(o["M"])("data-v-a4816382"),e=e(),Object(o["J"])(),e},_=h((function(){return Object(o["n"])("a",null,"友盟key管理",-1)})),g=Object(o["p"])("重置名称"),y=Object(o["p"])("刷新数据"),k=Object(o["p"])("友盟应用"),w=Object(o["p"])("编辑"),v=Object(o["p"])("移除"),q=Object(o["p"])("添加Key"),S={class:"dialog-footer"},C=Object(o["p"])("取消"),V=Object(o["p"])("更新配置"),U={class:"infinite-list"},x={style:{width:"80%","align-items":"flex-start"}},F={style:{width:"20%"}},T=Object(o["p"])("添加"),z=Object(o["p"])("移除");function E(e,t,n,c,a,l){var r=this,i=Object(o["S"])("el-col"),u=Object(o["S"])("el-button"),s=Object(o["S"])("el-row"),b=Object(o["S"])("el-header"),m=Object(o["S"])("el-divider"),d=Object(o["S"])("el-table-column"),f=Object(o["S"])("el-switch"),p=Object(o["S"])("el-table"),O=Object(o["S"])("el-empty"),j=Object(o["S"])("el-input"),h=Object(o["S"])("el-form-item"),E=Object(o["S"])("el-form"),I=Object(o["S"])("el-dialog"),L=Object(o["S"])("el-drawer"),D=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(D,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[_]})),_:1}),Object(o["q"])(i,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[0]||(t[0]=function(t){e.resetDisplayName=!0,e.refreshDrawer=!0,e.getUmApps(),e.getUmKeys(!0)})},{default:Object(o["hb"])((function(){return[g]})),_:1}),Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[1]||(t[1]=function(t){e.refreshDrawer=!0,e.getUmApps(),e.getUmKeys(!0)})},{default:Object(o["hb"])((function(){return[y]})),_:1}),Object(o["l"])("",!0),Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-menu",onClick:t[3]||(t[3]=function(t){return e.showUmApps()})},{default:Object(o["hb"])((function(){return[k]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(m),Object(o["ib"])(Object(o["q"])(p,{data:e.tableData,style:{width:"unset"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(d,{prop:"um_name",label:"显示名称",width:"300"}),Object(o["q"])(d,{prop:"um_key",label:"友盟key",width:"500"}),Object(o["q"])(d,{prop:"um_master",label:"是否Master"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(f,{modelValue:t.row.um_master,"onUpdate:modelValue":function(e){return t.row.um_master=e},"active-color":"#13ce66",onClick:function(n){return e.setMaster(t.$index,t.row)}},null,8,["modelValue","onUpdate:modelValue","onClick"])]})),_:1}),Object(o["q"])(d,{fixed:"right",label:"操作","min-width":"280",align:"right"},{default:Object(o["hb"])((function(t){return[Object(o["q"])(u,{class:"el-button-right",type:"primary",size:"mini",onClick:function(n){return e.editUmKey(t.$index,t.row)},icon:"el-icon-edit"},{default:Object(o["hb"])((function(){return[w]})),_:2},1032,["onClick"]),Object(o["q"])(u,{class:"el-button-right",type:"danger",size:"mini",onClick:function(n){return e.deleteUmKey(t.$index,t.row)},icon:"el-icon-close"},{default:Object(o["hb"])((function(){return[v]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(O,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[4]||(t[4]=function(t){return e.showUmApps()})},{default:Object(o["hb"])((function(){return[q]})),_:1})]})),_:1},512),[[o["eb"],0===e.tableData.length]]),Object(o["q"])(I,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.dialogFormVisible=t}),title:"".concat(e.dialogCommitTitle,"key")},{footer:Object(o["hb"])((function(){return[Object(o["n"])("span",S,[Object(o["q"])(u,{onClick:t[8]||(t[8]=function(t){return e.dialogFormVisible=!1})},{default:Object(o["hb"])((function(){return[C]})),_:1}),Object(o["q"])(u,{type:"primary",onClick:e.addOrUpdateKey},{default:Object(o["hb"])((function(){return[Object(o["p"])(Object(o["W"])(e.dialogCommitTitle),1)]})),_:1},8,["onClick"])])]})),default:Object(o["hb"])((function(){return[Object(o["q"])(E,{model:e.form},{default:Object(o["hb"])((function(){return[Object(o["q"])(h,{label:"显示名称：","label-width":e.formLabelWidth},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{modelValue:e.form.um_name,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.um_name=t}),autocomplete:"off",placeholder:"key的别名",maxlength:"24","show-word-limit":"true"},null,8,["modelValue"])]})),_:1},8,["label-width"]),Object(o["q"])(h,{label:"友盟key：","label-width":e.formLabelWidth,required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{modelValue:e.form.um_key,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.um_key=t}),autocomplete:"off",minlength:"24",maxlength:"24","show-word-limit":"true",placeholder:"请输入24位长度的友盟key",clearable:"true",disabled:"更新"==e.dialogCommitTitle},null,8,["modelValue","disabled"])]})),_:1},8,["label-width"]),Object(o["q"])(h,{label:"是否Master：","label-width":e.formLabelWidth},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{span:6},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.um_master,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.um_master=t}),"active-color":"#13ce66"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(i,{span:6})]})),_:1})]})),_:1},8,["label-width"])]})),_:1},8,["model"])]})),_:1},8,["modelValue","title"]),Object(o["q"])(L,{modelValue:e.showDrawer,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.showDrawer=t}),title:"友盟应用列表",direction:"rtl","before-close":e.onDrawerClose},{default:Object(o["hb"])((function(){return[Object(o["q"])(j,{modelValue:e.searchKey,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.searchKey=t}),autocomplete:"off",minlength:"0",maxlength:"20","show-word-limit":"true",placeholder:"请输入搜索关键词",clearable:"true",onInput:e.onSearchKeyInput,class:"infinite-list-item",style:{width:"auto","margin-right":"35px"}},null,8,["modelValue","onInput"]),Object(o["ib"])(Object(o["q"])(O,{description:"暂无相关数据",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-plus",onClick:t[11]||(t[11]=function(e){return r.$router.push("/other/config")})},{default:Object(o["hb"])((function(){return[V]})),_:1})]})),_:1},512),[[o["eb"],0===e.allKeyList.length]]),Object(o["n"])("ul",U,[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.allKeyList,(function(t){return Object(o["I"])(),Object(o["m"])("li",{key:t,class:"infinite-list-item"},[Object(o["n"])("a",x,Object(o["W"])(t.um_name),1),Object(o["n"])("div",F,[0===t.um_status?(Object(o["I"])(),Object(o["k"])(u,{key:0,size:"mini",type:"primary",icon:"el-icon-circle-plus-outline",onClick:function(n){t.um_status=1,e.addApp(t.um_name,t.um_key)}},{default:Object(o["hb"])((function(){return[T]})),_:2},1032,["onClick"])):Object(o["l"])("",!0),1===t.um_status?(Object(o["I"])(),Object(o["k"])(u,{key:1,size:"mini",type:"danger",icon:"el-icon-remove-outline",onClick:function(n){t.um_status=0,e.removeApp(t.um_name,t.um_key)}},{default:Object(o["hb"])((function(){return[z]})),_:2},1032,["onClick"])):Object(o["l"])("",!0)])])})),128))])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var I=function e(){Object(a["a"])(this,e)};I.BASE_URL="".concat(window.location.protocol,"//").concat(window.location.host),I.BASE_URL_SOCKET="ws://".concat(window.location.host),I.getUrl=function(e){var t="".concat(I.BASE_URL).concat(e);return console.log("url = ".concat(e,", newUrl=").concat(t)),t};n("d3b7"),n("a434");var L=n("bc3a"),D=n.n(L),K=D.a.create({baseURL:I.BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json;charset=UTF-8"},withCredentials:!0});K.interceptors.request.use((function(e){return R(e),e.cancelToken=new M((function(t){P.push({url:e.url,method:e.method,params:e.params,data:e.data,cancel:t})})),e.headers.Authorization=localStorage.getItem("token"),e}),(function(e){return N(e.data.error.message),Promise.reject(e.data.error.message)})),K.interceptors.response.use((function(e){return R(e.config),200===e.status||204===e.status?Promise.resolve(e):Promise.reject(e)}),(function(e){var t=e.response;if(t){A(t.status,t.data.message);var n=e.config,o=3,c=1e3;if(n&&o){if(n.__retryCount=n.__retryCount||0,n.__retryCount>=o)return Promise.reject(t||{message:e.message});n.__retryCount++;var a=new Promise((function(e){setTimeout((function(){e()}),c||1)}));return a.then((function(){return K(n)}))}return Promise.reject(t)}}));var N=function(e){j.showError(e)},A=function(e,t){switch(console.log("errorHandle ".concat(e," : ").concat(t)),e){case 302:N("请求已重定向");break;case 400:N("请求参数错误");break;case 401:N("登录信息已失效");break;case 403:N("授权信息已过期，请重新登录"),setTimeout((function(){}),1e3);break;case 404:N("当前请求不存在");break;case 406:N("请求的格式有误");break;case 408:N(" 请求超时");break;case 410:N("请求的资源被永久删除，且不会再得到");break;case 422:N("当创建一个对象时，发生一个验证错误");break;case 500:N("服务器异常，请稍候重试");break;case 502:N("网关错误");break;case 503:N("服务不可用，服务器暂时过载或维护");break;case 504:N("网关超时");break;default:N("其他错误错误");break}},P=[],M=D.a.CancelToken,R=function(e){for(var t in P){var n=+t,o=P[t],c=o.url===e.url&&o.method===e.method&&JSON.stringify(o.params)===JSON.stringify(e.params)&&JSON.stringify(o.data)===JSON.stringify(e.data);c&&(o.cancel("操作太频繁，请稍后再试"),P.splice(n,1))}},W=K,Y=function e(){Object(a["a"])(this,e)};Y.parseRes=function(e,t,n){if(console.log(e),200===e.data.code)t(e);else{switch(e.data.code){case 401:case 403:ct.push("/login");break;case 499:ct.push("/other/config");break;default:break}j.showError(e.data.msg),n(e)}},Y.get=function(e,t){return new Promise((function(n,o){W.get(e,{params:t}).then((function(e){Y.parseRes(e,n,o)})).catch((function(e){o(e)}))}))},Y.post=function(e,t){return new Promise((function(n,o){W.post(e,JSON.stringify(t)).then((function(e){Y.parseRes(e,n,o)})).catch((function(e){o(e)}))}))};var B=function e(){Object(a["a"])(this,e)};B.um={add_um_key:function(e){return Y.post("/api/add_um_key",e)},get_um_keys:function(e){return Y.post("/api/get_um_keys",e)},del_um_key:function(e){return Y.post("/api/del_um_key",e)},um_key_master:function(e){return Y.post("/api/um_key_master",e)},save_config:function(e){return Y.post("/api/save_config",e)},get_config:function(){return Y.get("/api/get_config")},um_event:function(e){return Y.post("/api/um_event",e)},um_event_op:function(e){return Y.post("/api/um_event_op",e)},um_event_import:"".concat(I.BASE_URL,"/api/um_event_import"),um_event_update:"".concat(I.BASE_URL,"/api/um_event_update"),um_socket:"".concat(I.BASE_URL_SOCKET,"/ws/um/"),login:function(e){return Y.post("/api/login",e)},reg:function(e){return Y.post("/api/reg",e)}};var J=Object(o["r"])({created:function(){this.searchKey=localStorage.getItem("um_searchKey")||"",this.getUmKeys()},setup:function(){var e=Object(o["N"])({searchKey:"",showDrawer:!1,refreshDrawer:!1,resetDisplayName:!1,allKeyList:[],tableData:[],dialogFormVisible:!1,form:{um_name:"",um_key:"",um_master:!1,um_status:0},formLabelWidth:"120px",dialogCommitTitle:"添加"}),t=function(){var t={um_status:-1,reset_name:e.resetDisplayName,refresh:e.refreshDrawer||0===e.allKeyList.length,keyword:e.searchKey};B.um.get_um_keys(t).then((function(t){e.allKeyList=t.data.data,e.refreshDrawer=!1,e.resetDisplayName=!1}))},n=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];B.um.get_um_keys({um_status:1,reset_name:e.resetDisplayName,refresh:e.refreshDrawer}).then((function(n){e.tableData=n.data.data,e.refreshDrawer=!1,e.resetDisplayName=!1,t&&j.showSuccess("操作成功")}))},c=function(t,n){console.log(t,n),e.form={um_name:n.um_name,um_key:n.um_key,um_master:n.um_master,um_status:n.um_status},e.dialogFormVisible=!0,e.dialogCommitTitle="更新"},a=function(){var t=/^[A-Za-z0-9]+$/;24==e.form.um_key.length&&t.test(e.form.um_key)?(e.dialogFormVisible=!1,console.log(JSON.stringify(e.form)),B.um.add_um_key(e.form).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))):j.showError("请输入24位长度的友盟key（只能包含数字跟字母）")},l=function(t,n){console.log(n),e.form=n,e.form.um_status=0,a()},r=function(t,n){console.log(n),B.um.um_key_master(n).then((function(t){e.tableData=t.data.data,j.showSuccess(t.data.msg)}))},i=function(t,n){console.log("addApp: ".concat(t,"  ").concat(n," ")),e.form={um_name:t,um_key:n,um_master:!1,um_status:1},a()},u=function(t,n){console.log("removeApp: ".concat(t,"  ").concat(n," ")),e.form={um_name:t,um_key:n,um_master:!1,um_status:0},a()},s=function(){e.showDrawer=!1},m=function(){e.showDrawer=!0,t()},d=function(){console.log("关键词输入监听"),localStorage.setItem("um_searchKey",e.searchKey),t()};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{addOrUpdateKey:a,getUmKeys:n,getUmApps:t,editUmKey:c,setMaster:r,deleteUmKey:l,onDrawerClose:s,showUmApps:m,addApp:i,removeApp:u,onSearchKeyInput:d})}}),Z=(n("27cf"),n("6b0d")),H=n.n(Z);const $=H()(J,[["render",E],["__scopeId","data-v-a4816382"]]);var X=$,Q=Object(o["n"])("a",null,"配置管理",-1),G=Object(o["p"])("UMEM助手一键更新配置"),ee=Object(o["p"])("友盟官网（去登录获取cookie等）"),te=Object(o["p"])("保存");function ne(e,t,n,c,a,l){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-row"),s=Object(o["S"])("el-header"),b=Object(o["S"])("el-divider"),m=Object(o["S"])("el-step"),d=Object(o["S"])("el-steps"),f=Object(o["S"])("el-input"),p=Object(o["S"])("el-form-item"),O=Object(o["S"])("el-form"),j=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(j,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[Q]})),_:1}),Object(o["q"])(r,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",type:"primary",icon:"el-icon-refresh",onClick:e.showUmemPlugin},{default:Object(o["hb"])((function(){return[G]})),_:1},8,["onClick"]),Object(o["q"])(i,{size:"mini",type:"primary",icon:"el-icon-setting",onClick:e.toLoginUm},{default:Object(o["hb"])((function(){return[ee]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(b),Object(o["q"])(d,{active:3,"finish-status":"success",simple:"true",style:{"margin-left":"40px","margin-right":"40px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(m,{title:"登录友盟官网",onClick:e.toLoginUm},null,8,["onClick"]),Object(o["q"])(m,{title:"F12控制台复制参数",onClick:e.toLoginUm},null,8,["onClick"]),Object(o["q"])(m,{title:"保存配置",onClick:e.addOrUpdateConfig},null,8,["onClick"])]})),_:1}),Object(o["q"])(O,{"label-position":e.right,"label-width":"150px",model:e.form,style:{margin:"20px",width:"96.5%"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(p,{label:"content_type",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.uc_content_type,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.uc_content_type=t}),placeholder:"【必填】默认值为application/json;charset=UTF-8"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(p,{label:"user_agent",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.uc_user_agent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.uc_user_agent=t}),placeholder:"【必填】请求头中的[user-agent]字段内容"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(p,{label:"cookie",required:!0},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.uc_cookie,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.uc_cookie=t}),placeholder:"【必填】友盟那边登录成功后请求头中的[uc_cookie]字段内容",onInput:e.onCookieInput},null,8,["modelValue","onInput"])]})),_:1}),Object(o["q"])(p,{label:"token"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.uc_token,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.uc_token=t}),placeholder:"【不用手动填】会自动从uc_cookie中的[XSRF-TOKEN]中读取，如果取不到，请检查是否正确的友盟登录后的uc_cookie"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(p,{label:"token_haitang"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{modelValue:e.form.uc_token_haitang,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.uc_token_haitang=t}),placeholder:"【不用手动填】会自动从uc_cookie中的[XSRF-TOKEN-HAITANG]中读取，如果取不到，请检查是否正确的友盟登录后的uc_cookie"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["label-position","model"]),Object(o["q"])(i,{type:"primary",size:"mini",onClick:e.addOrUpdateConfig,icon:"el-icon-upload",style:{"margin-left":"45%","margin-right":"45%"}},{default:Object(o["hb"])((function(){return[te]})),_:1},8,["onClick"])]})),_:1})}n("159b"),n("ac1f"),n("1276"),n("841c"),n("b64b");var oe=function e(){Object(a["a"])(this,e)};oe.isEmpty=function(e){return!e||0===Object.keys(e).length};var ce=Object(o["r"])({components:{},created:function(){this.getConfig(),window.addEventListener("message",(function(e){var t=e.data;console.log(t)}),!1),document.cookie="UMEM_TOKEN=".concat(localStorage.getItem("token"),"; Max-Age=").concat(31536e3)},setup:function(){var e=Object(o["N"])({DEFAULT_CONTENT_TYPE:"application/json;charset=UTF-8",form:{uc_content_type:"",uc_user_agent:"",uc_token:"",uc_token_haitang:"",uc_cookie:"",uc_key_master:"",uc_key_slaves:""}});function t(){if(console.log(e.form.uc_cookie),n())return console.log("该cookie中没有token信息，跳过"),e.form.uc_token="",void(e.form.uc_token_haitang="");e.form.uc_cookie.split(";").forEach((function(t){-1!=t.search("XSRF-TOKEN-HAITANG")?e.form.uc_token_haitang=t.split("=")[1]:-1!=t.search("XSRF-TOKEN")&&(e.form.uc_token=t.split("=")[1])}))}function n(){return-1===e.form.uc_cookie.search("XSRF-TOKEN")&&-1===e.form.uc_cookie.search("XSRF-TOKEN-HAITANG")}var c=function(){oe.isEmpty(e.form.uc_user_agent)?j.showWarning("请填写user_agent信息"):oe.isEmpty(e.form.uc_cookie)?j.showWarning("请填写cookie信息"):n()?j.showWarning("请填写正确的cookie信息（该cookie中未找到token信息）"):(t(),a(),console.log(JSON.stringify(e.form)),B.um.save_config(e.form).then((function(e){j.showSuccess(e.data.msg)})))};function a(){oe.isEmpty(e.form.uc_content_type)&&(e.form.uc_content_type=e.DEFAULT_CONTENT_TYPE),oe.isEmpty(e.form.uc_user_agent)&&(e.form.uc_user_agent=navigator.userAgent)}var l=function(){B.um.get_config().then((function(t){e.form=t.data.data,a()}))},r=function(){console.log("点击login"),window.open("https://mobile.umeng.com/platform/apps/list","_blank")},i=function(){console.log("cookie输入监听"),t()},u=function(){console.log("showUmemPlugin"),window.open("https://github.com/Samge0/umem-plugin","_blank")};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{addOrUpdateConfig:c,getConfig:l,toLoginUm:r,onCookieInput:i,showUmemPlugin:u})}});const ae=H()(ce,[["render",ne]]);var le=ae,re=function(e){return Object(o["M"])("data-v-27185050"),e=e(),Object(o["J"])(),e},ie={class:"login-from"},ue=re((function(){return Object(o["n"])("a",{class:"login-tag"},"登录",-1)})),se=Object(o["p"])("登录"),be=re((function(){return Object(o["n"])("a",{class:"login-tag"},"注册",-1)})),me=Object(o["p"])("注册"),de=re((function(){return Object(o["n"])("br",null,null,-1)}));function fe(e,t,n,c,a,l){var r=Object(o["S"])("el-input"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-form"),s=Object(o["S"])("el-container");return Object(o["I"])(),Object(o["k"])(s,{direction:"vertical",class:"login-bg"},{default:Object(o["hb"])((function(){return[Object(o["n"])("div",ie,[e.showLogin?(Object(o["I"])(),Object(o["k"])(u,{key:0,ref:"form",model:e.loginForm,"label-width":"120px","label-position":"right"},{default:Object(o["hb"])((function(){return[ue,Object(o["q"])(r,{class:"login-input",modelValue:e.loginForm.u_name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.loginForm.u_name=t}),placeholder:"用户名/手机号",clearable:"true","prefix-icon":"el-icon-mobile-phone"},null,8,["modelValue"]),Object(o["q"])(r,{class:"login-input",modelValue:e.loginForm.u_pw,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.loginForm.u_pw=t}),placeholder:"长度6位及以上的密码",clearable:"true",type:"password","show-password":"true",minlength:"6",maxlength:"20","prefix-icon":"el-icon-tickets"},null,8,["modelValue"]),Object(o["q"])(i,{class:"login-bt",type:"primary",size:"mini",onClick:t[2]||(t[2]=function(t){return e.doLogin()})},{default:Object(o["hb"])((function(){return[se]})),_:1}),Object(o["n"])("a",{class:"login-other",size:"mini",onClick:t[3]||(t[3]=function(t){e.showReg=!0,e.showLogin=!1})},"没有账户，去注册")]})),_:1},8,["model"])):Object(o["l"])("",!0),e.showReg?(Object(o["I"])(),Object(o["k"])(u,{key:1,ref:"form",model:e.regForm,"label-width":"0px","label-position":"right"},{default:Object(o["hb"])((function(){return[be,Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_name,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.regForm.u_name=t}),placeholder:"用户名【选填】",clearable:"true","prefix-icon":"el-icon-info"},null,8,["modelValue"]),Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_phone,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.regForm.u_phone=t}),placeholder:"请输入手机号【必填】",clearable:"true",maxlength:"11","prefix-icon":"el-icon-mobile-phone"},null,8,["modelValue"]),Object(o["l"])("",!0),Object(o["q"])(r,{class:"login-input",modelValue:e.regForm.u_pw,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.regForm.u_pw=t}),placeholder:"长度6位及以上的密码【必填】",clearable:"true",type:"password","show-password":"true",minlength:"6",maxlength:"20","prefix-icon":"el-icon-tickets"},null,8,["modelValue"]),Object(o["q"])(i,{class:"login-bt",type:"primary",size:"mini",onClick:t[8]||(t[8]=function(t){return e.doReg()})},{default:Object(o["hb"])((function(){return[me]})),_:1}),de,Object(o["n"])("a",{class:"login-other",size:"mini",onClick:t[9]||(t[9]=function(t){e.showReg=!1,e.showLogin=!0})},"已有账号，去登录")]})),_:1},8,["model"])):Object(o["l"])("",!0)])]})),_:1})}var pe=Object(o["r"])({created:function(){var e=localStorage.getItem("u_name")||"",t=localStorage.getItem("u_pw")||"";this.loginForm.u_name=e,this.loginForm.u_pw=t,document.cookie="UMEM_TOKEN=; Max-Age=".concat(31536e3)},setup:function(){var e=Object(o["N"])({bgSrc:"/bg.png",showLogin:!0,loginForm:{u_name:"",u_pw:""},regLogin:!1,regForm:{u_name:"",u_pw:"",u_phone:"",u_email:"",u_code:"666666"}}),t=function(){B.um.login(e.loginForm).then((function(t){oe.isEmpty(e.loginForm.u_name)?j.showWarning("请输入账号"):oe.isEmpty(e.loginForm.u_pw)||e.loginForm.u_pw.length<6?j.showWarning("请输入6位及以上长度密码"):(c(t),localStorage.setItem("u_pw",e.loginForm.u_pw))}))},n=function(){oe.isEmpty(e.regForm.u_phone)||11!=e.regForm.u_phone.length?j.showWarning("请输入正确的手机号"):oe.isEmpty(e.regForm.u_pw)||e.regForm.u_pw.length<6?j.showWarning("请输入6位及以上长度密码"):B.um.reg(e.regForm).then((function(t){c(t),localStorage.setItem("u_pw",e.regForm.u_pw)}))},c=function(e){j.showSuccess(e.data.msg),localStorage.setItem("token",e.data.data.u_token),localStorage.setItem("u_id",e.data.data.u_id),localStorage.setItem("u_name",e.data.data.u_name),ct.push("/home")};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{doLogin:t,doReg:n,parseSucceed:c})}});n("b855");const Oe=H()(pe,[["render",fe],["__scopeId","data-v-27185050"]]);var je=Oe,he=function(e){return Object(o["M"])("data-v-88959814"),e=e(),Object(o["J"])(),e},_e=he((function(){return Object(o["n"])("a",null,"任务管理",-1)})),ge={key:0,class:"el-button-add",style:{"margin-right":"20px"}},ye=Object(o["p"])("正在执行..."),ke=[ye],we=Object(o["p"])("上传/更新事件"),ve=Object(o["p"])("执行【同步】任务"),qe=he((function(){return Object(o["n"])("div",{class:"el-upload__text"},[Object(o["p"])(" 拖拽文件到这里 "),Object(o["n"])("em",null," 或点击上传 "),Object(o["n"])("br"),Object(o["p"])("格式：事件id, 事件名称, 事件类型（0或1） ")],-1)}));function Se(e,t,n,c,a,l){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-button"),u=Object(o["S"])("el-row"),s=Object(o["S"])("el-header"),b=Object(o["S"])("el-divider"),m=Object(o["S"])("el-timeline-item"),d=Object(o["S"])("el-timeline"),f=Object(o["S"])("el-upload"),p=Object(o["S"])("el-dialog"),O=Object(o["S"])("el-backtop"),j=Object(o["S"])("el-container"),h=Object(o["T"])("loading");return Object(o["I"])(),Object(o["k"])(j,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[_e]})),_:1}),Object(o["q"])(r,{span:12,align:"right"},{default:Object(o["hb"])((function(){return[e.isTaskRunning?Object(o["ib"])((Object(o["I"])(),Object(o["m"])("a",ge,ke,512)),[[h,e.isTaskRunning]]):Object(o["l"])("",!0),Object(o["l"])("",!0),Object(o["l"])("",!0),Object(o["l"])("",!0),Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[3]||(t[3]=function(t){return e.uploadEvent()}),disabled:e.isTaskRunning},{default:Object(o["hb"])((function(){return[we]})),_:1},8,["disabled"]),Object(o["q"])(i,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-phone",onClick:t[4]||(t[4]=function(t){return e.startSynTask()}),disabled:e.isTaskRunning},{default:Object(o["hb"])((function(){return[ve]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(b),Object(o["ib"])(Object(o["q"])(d,null,{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.timeLineList,(function(e,t){return Object(o["I"])(),Object(o["k"])(m,{style:{"text-align":"left"},key:t,timestamp:e.timestamp,center:!1},{default:Object(o["hb"])((function(){return[Object(o["p"])(Object(o["W"])(e.content),1)]})),_:2},1032,["timestamp"])})),128))]})),_:1},512),[[h,e.loading]]),Object(o["q"])(p,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dialogFormVisible=t}),title:"上传事件"},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{ref:"upload",action:e.uploadUrl,"on-success":e.handleUploadSucceed,"file-list":e.fileList,data:e.uc_key_master,headers:e.upload_headers,"show-file-list":"false",multiple:"false",drag:"true"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{size:"mini",icon:"el-icon-upload",style:{"background-color":"transparent",border:"0px"}}),qe]})),_:1},8,["action","on-success","file-list","data","headers"])]})),_:1},8,["modelValue"]),Object(o["q"])(O,{bottom:50})]})),_:1})}var Ce=null,Ve=Object(o["r"])({components:{},created:function(){this.getConfig()},beforeUnmount:function(){this.closeWebsocket(),Ce=null},setup:function(){var e=Object(o["N"])({isTaskRunning:!1,loading:!1,upload_headers:{Authorization:localStorage.getItem("token")},uc_key_master:"",taskType:"",timeLineList:[{content:"暂无在执行任务",timestamp:""},{content:"请点击右上角执行相应的任务",timestamp:""}],dialogFormVisible:!1,fileList:[],uploadUrl:B.um.um_event_update}),t=function(){return(new Date).toLocaleString()},n=function(){e.loading=!1,e.isTaskRunning=!1,e.taskType="";var t={type:"stop"};d(t)},c=function(){g()&&l("syn")},a=function(){l("update")},l=function(n){if(e.loading=!0,e.isTaskRunning=!0,e.timeLineList=[{content:"正在检测并等待其他作业任务完成，请稍后......",timestamp:t()}],e.taskType=n,f()){var o={type:n};d(o)}},r=function(n){e.loading=!1,console.log("websocketOnMessage date=",n);var o=n.data;e.timeLineList.push({content:o,timestamp:t()}),"任务中止"!=o&&"任务完成"!=o||(e.taskType="",e.isTaskRunning=!1)},i=function(){console.log("websocketOnOpen");var t={type:"connect"};if(d(t),null!=e.taskType&&""!=e.taskType){var n={type:e.taskType};d(n)}},u=function(){console.log("websocketOnConnect")},s=function(){console.log("websocketOnError"),f()},m=function(e){console.log("websocketOnClose 断开连接 e=",e)},d=function(e){console.log("websocketSend data=",e),null!=Ce&&null!=e&&Ce.send(JSON.stringify(e))},f=function(){var e="".concat(B.um.um_socket).concat(localStorage.getItem("u_id"));return Ce=new WebSocket(e),Ce.onmessage=r,Ce.onopen=i,Ce.onconnect=u,Ce.onerror=s,Ce.onclose=m,!0},p=function(){null!=Ce&&Ce.close(),console.log("销毁 websocket 实例对象")},O=function(t,n,o){e.dialogFormVisible=!1,console.log("handleUploadSucceed ".concat(t).concat(n," ").concat(o)),200!=t.code&&j.showError(t.msg),401!=t.code&&403!=t.code?(j.showSuccess("上传成功，开始同步更新友盟事件"),a()):ct.push("/login")},h=function(){g()&&(e.dialogFormVisible=!0)},_=function(){B.um.get_config().then((function(t){e.uc_key_master=t.data.data.uc_key_master}))},g=function(){return!oe.isEmpty(e.uc_key_master)||(j.showWarning("请先设置一个【Master】类型的友盟KEY"),ct.push("/home"),!1)},y=function(n){e.timeLineList.push({content:"开始更新本地事件列表：".concat(n),timestamp:t()});var o={um_key:n,refresh:1,pg_index:1,pg_size:15,filter:{}};B.um.um_event(o).then((function(){e.timeLineList.push({content:"更新本地事件列表成功：".concat(n),timestamp:t()})})).catch((function(){e.timeLineList.push({content:"更新本地事件失败：".concat(n),timestamp:t()})}))};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{stopTask:n,startTask:l,startSynTask:c,startUpdateTask:a,uploadEvent:h,updateUmEvents:y,initWebsocket:f,closeWebsocket:p,websocketOnMessage:r,websocketOnOpen:i,websocketOnConnect:u,websocketOnError:s,websocketOnClose:m,websocketSend:d,getCurrDate:t,getConfig:_,handleUploadSucceed:O})}});n("031e");const Ue=H()(Ve,[["render",Se],["__scopeId","data-v-88959814"]]);var xe=Ue,Fe=function(e){return Object(o["M"])("data-v-0625101e"),e=e(),Object(o["J"])(),e},Te=Fe((function(){return Object(o["n"])("a",null,"事件管理",-1)})),ze=Object(o["p"])("官网链接"),Ee=Object(o["p"])("刷新"),Ie=Object(o["p"])("批量暂停"),Le=Object(o["p"])("批量恢复"),De=Object(o["p"])("上传事件"),Ke=Object(o["p"])("导出事件"),Ne=Object(o["p"])("事件筛选"),Ae=Object(o["p"])("上传事件"),Pe=Fe((function(){return Object(o["n"])("div",{class:"el-upload__text"},[Object(o["p"])(" 拖拽文件到这里 "),Object(o["n"])("em",null," 或点击上传 "),Object(o["n"])("br"),Object(o["p"])("格式：事件id, 事件名称, 事件类型（0或1） ")],-1)})),Me=Object(o["p"])(" ~ "),Re=Object(o["p"])(" ~ "),We=Object(o["p"])(" ~ "),Ye=Object(o["p"])("查询所有数量为 0 的事件"),Be={style:{display:"flex","align-items":"flex-start","margin-left":"50px"}},Je=Object(o["p"])("重置"),Ze=Object(o["p"])("提交");function He(e,t,n,c,a,l){var r=Object(o["S"])("el-col"),i=Object(o["S"])("el-option"),u=Object(o["S"])("el-select"),s=Object(o["S"])("el-button"),b=Object(o["S"])("el-row"),m=Object(o["S"])("el-header"),d=Object(o["S"])("el-divider"),f=Object(o["S"])("el-table-column"),p=Object(o["S"])("el-table"),O=Object(o["S"])("el-pagination"),j=Object(o["S"])("el-empty"),h=Object(o["S"])("el-upload"),_=Object(o["S"])("el-dialog"),g=Object(o["S"])("el-input"),y=Object(o["S"])("el-form-item"),k=Object(o["S"])("el-input-number"),w=Object(o["S"])("el-form"),v=Object(o["S"])("el-drawer"),q=Object(o["S"])("el-backtop"),S=Object(o["S"])("el-container"),C=Object(o["T"])("loading");return Object(o["I"])(),Object(o["k"])(S,{direction:"vertical",class:"demo-shadow"},{default:Object(o["hb"])((function(){return[Object(o["q"])(m,{style:{height:"auto"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(b,{type:"flex",justify:"space-between"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,{span:3,align:"left"},{default:Object(o["hb"])((function(){return[Te]})),_:1}),Object(o["q"])(r,{span:20,align:"right"},{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.query.um_key,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.query.um_key=t}),placeholder:"Select",size:"mini",style:{"margin-right":"20px"},onChange:e.onUmKeyChange},{default:Object(o["hb"])((function(){return[(Object(o["I"])(!0),Object(o["m"])(o["b"],null,Object(o["Q"])(e.umKeys,(function(e){return Object(o["I"])(),Object(o["k"])(i,{key:e.um_key,label:e.um_name,value:e.um_key},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-info",onClick:t[1]||(t[1]=function(t){return e.openUmLink()})},{default:Object(o["hb"])((function(){return[ze]})),_:1}),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[2]||(t[2]=function(t){e.query.refresh=1,e.query.pg_index=1,e.getUmEvents()})},{default:Object(o["hb"])((function(){return[Ee]})),_:1}),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-delete",onClick:t[3]||(t[3]=function(t){return e.parseEventOpWithDialog(0,"批量暂停")})},{default:Object(o["hb"])((function(){return[Ie]})),_:1}),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-refresh",onClick:t[4]||(t[4]=function(t){return e.parseEventOpWithDialog(1,"批量恢复")})},{default:Object(o["hb"])((function(){return[Le]})),_:1}),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-upload2",onClick:t[5]||(t[5]=function(t){return e.uploadEventFile()})},{default:Object(o["hb"])((function(){return[De]})),_:1}),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-download",onClick:e.exportCurrEvents},{default:Object(o["hb"])((function(){return[Ke]})),_:1},8,["onClick"]),Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-sort",onClick:t[6]||(t[6]=function(t){e.showDrawer=!0})},{default:Object(o["hb"])((function(){return[Ne]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["q"])(d),Object(o["ib"])(Object(o["q"])(p,{data:e.tableData,onSelectionChange:e.handleSelectionChange,style:{width:"unset"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(f,{type:"selection"}),Object(o["q"])(f,{type:"index"}),Object(o["q"])(f,{prop:"um_name",sortable:"",label:"事件id",width:"300"}),Object(o["q"])(f,{prop:"um_displayName",sortable:"",label:"事件名称",width:"300"}),Object(o["q"])(f,{prop:"um_eventType",sortable:"",label:"事件类型",width:"130"}),Object(o["q"])(f,{prop:"um_status",sortable:"",label:"事件状态",width:"130"}),Object(o["q"])(f,{prop:"um_countYesterday",sortable:"",label:"昨日消息数",width:"130"}),Object(o["q"])(f,{prop:"um_countToday",sortable:"",label:"今日消息数",width:"130"}),Object(o["q"])(f,{prop:"um_deviceYesterday",sortable:"",label:"昨日独立用户数"})]})),_:1},8,["data","onSelectionChange"]),[[C,e.loading],[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(O,{layout:"total, sizes, prev, pager, next, jumper","current-page":e.query.pg_index,"page-size":e.query.pg_size,"page-sizes":[15,30,50,120,200,300,400,500,600,700,800,900,1e3,2e3],total:e.total,"prev-text":"上一页","next-text":"下一页",onCurrentChange:e.onCurrentPageChange,onSizeChange:e.onPageSizeChange,style:{margin:"30px"}},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"]),[[o["eb"],e.tableData.length>0]]),Object(o["ib"])(Object(o["q"])(j,{description:"暂无相关数据，可点击上面【刷新】按钮重试",style:{"margin-top":"100px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{size:"mini",class:"el-button-add",type:"primary",icon:"el-icon-upload",onClick:t[7]||(t[7]=function(t){return e.uploadEventFile()})},{default:Object(o["hb"])((function(){return[Ae]})),_:1})]})),_:1},512),[[o["eb"],0===e.tableData.length]]),Object(o["q"])(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.dialogFormVisible=t}),title:"上传事件"},{default:Object(o["hb"])((function(){return[Object(o["q"])(h,{ref:"upload",action:e.uploadUrl,"on-success":e.handleUploadSucceed,"file-list":e.fileList,data:e.query.um_key,headers:e.upload_headers,"show-file-list":"false",multiple:"false",drag:"true"},{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{size:"mini",icon:"el-icon-upload",style:{"background-color":"transparent",border:"0px"}}),Pe]})),_:1},8,["action","on-success","file-list","data","headers"])]})),_:1},8,["modelValue"]),Object(o["q"])(v,{modelValue:e.showDrawer,"onUpdate:modelValue":t[20]||(t[20]=function(t){return e.showDrawer=t}),title:"事件筛选",direction:"rtl","before-close":e.onFilterSubmit},{default:Object(o["hb"])((function(){return[Object(o["q"])(w,{ref:"form",model:e.filterForm,"label-width":"120px","label-position":"right",style:{"margin-right":"40px","margin-top":"10px"}},{default:Object(o["hb"])((function(){return[Object(o["q"])(y,{label:"关键词",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(g,{modelValue:e.filterForm.keyword,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.filterForm.keyword=t}),class:"el-input-filter",style:{width:"100%",height:"35px"},size:"small"},null,8,["modelValue"])]})),_:1}),Object(o["q"])(y,{label:"事件状态",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.state,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.filterForm.state=t}),placeholder:"请选择事件状态",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"不限状态",value:""}),Object(o["q"])(i,{label:"有效事件",value:"normal"}),Object(o["q"])(i,{label:"暂停事件",value:"stopped"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"事件类型",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.type,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.filterForm.type=t}),placeholder:"请选择事件类型",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"不限类型",value:""}),Object(o["q"])(i,{label:"多参数类型事件",value:"0"}),Object(o["q"])(i,{label:"计算事件",value:"1"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"排序字段",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.order_by,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.filterForm.order_by=t}),placeholder:"请选择排序字段",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"事件id",value:"um_name"}),Object(o["q"])(i,{label:"事件名称",value:"um_displayName"}),Object(o["q"])(i,{label:"昨日消息数",value:"um_countYesterday"}),Object(o["q"])(i,{label:"今日消息数",value:"um_countToday"}),Object(o["q"])(i,{label:"昨日独立用户数",value:"um_deviceYesterday"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"排序方式",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(u,{modelValue:e.filterForm.order,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.filterForm.order=t}),placeholder:"请选择排序方式",class:"el-select-filter",size:"small"},{default:Object(o["hb"])((function(){return[Object(o["q"])(i,{label:"降序",value:"desc"}),Object(o["q"])(i,{label:"升序",value:"asc"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"昨日数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.yesterday_min,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.filterForm.count_limit.yesterday_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),Me,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.yesterday_max,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.filterForm.count_limit.yesterday_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"今日数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.today_min,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.filterForm.count_limit.today_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),Re,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.today_max,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.filterForm.count_limit.today_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"用户数量",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.device_min,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.filterForm.count_limit.device_min=t}),label:"昨日数量",placeholder:"最小值"},null,8,["modelValue"]),We,Object(o["q"])(k,{class:"el-input-filter",size:"small",modelValue:e.filterForm.count_limit.device_max,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.filterForm.count_limit.device_max=t}),placeholder:"最大值"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["q"])(y,{label:"数量筛选",size:"mini"},{default:Object(o["hb"])((function(){return[Object(o["q"])(r,null,{default:Object(o["hb"])((function(){return[Object(o["q"])(s,{onClick:e.queryAllZeroEvent,size:"small"},{default:Object(o["hb"])((function(){return[Ye]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(o["n"])("div",Be,[Object(o["q"])(s,{class:"el-button-filter",onClick:e.onFilterReset,size:"small"},{default:Object(o["hb"])((function(){return[Je]})),_:1},8,["onClick"]),Object(o["q"])(s,{class:"el-button-filter",type:"primary",onClick:e.onFilterSubmit,size:"small"},{default:Object(o["hb"])((function(){return[Ze]})),_:1},8,["onClick"])])]})),_:1},8,["model"])]})),_:1},8,["modelValue","before-close"]),Object(o["q"])(q,{bottom:50})]})),_:1})}var $e=n("b85c"),Xe=(n("4de4"),n("21a6")),Qe=Object(o["r"])({created:function(){this.tableData=[],this.onFilterReset(),this.getUmKeys()},setup:function(){var e=Object(o["N"])({upload_headers:{Authorization:localStorage.getItem("token")},filterForm:{keyword:"",order_by:"um_deviceYesterday",order:"desc",state:"normal",type:"",count_limit:{}},showDrawer:!1,umKeys:[],fileList:[],uploadUrl:B.um.um_event_import,loading:!1,tableData:[{um_key:"",um_eventId:"",um_name:"",um_displayName:"",um_status:"",um_eventType:0,um_countToday:0,um_countYesterday:0,um_deviceYesterday:0}],dialogFormVisible:!1,form:{um_key:"",um_eventId:"",um_name:"",um_displayName:"",um_status:"",um_eventType:0,um_countToday:0,um_countYesterday:0,um_deviceYesterday:0},query:{um_key:"",refresh:0,pg_index:1,pg_size:15,filter:{}},total:50,formLabelWidth:"120px",dialogCommitTitle:"添加",ids:[""]}),t=function(){e.loading=!0,B.um.get_um_keys({um_status:1,refresh:!1}).then((function(t){e.loading=!1,t.data.data.length>0&&(e.umKeys=t.data.data,e.query.um_key=t.data.data[0].um_key,c())})).catch((function(){e.tableData=[],e.loading=!1}))},n=function(){return!oe.isEmpty(e.query.um_key)||(j.showWarning("请先设置一个友盟KEY"),ct.push("/home"),!1)},c=function t(){n()&&(e.loading=!0,e.query.filter=e.filterForm,B.um.um_event(e.query).then((function(n){0===e.query.refresh&&0===n.data.data.total?(console.log("如果请求本地数据库 且 请求结果为空，则尝试从远程api获取数据进行刷新"),e.query.refresh=1,t()):(e.tableData=n.data.data.lst,e.total=n.data.data.total,e.query.refresh=0,e.loading=!1)})).catch((function(){e.tableData=[],e.loading=!1})))},a=function(t,o){n()&&(console.log(t,o),e.form={um_key:o.um_key,um_eventId:o.um_eventId,um_name:o.um_name,um_displayName:o.um_displayName,um_status:o.um_status,um_eventType:o.um_eventType,um_countToday:o.um_countToday,um_countYesterday:o.um_countYesterday,um_deviceYesterday:o.um_deviceYesterday},e.dialogFormVisible=!0,e.dialogCommitTitle="更新")},l=function(t,o){if(n())if(0!==e.ids.length&&""!==e.ids[0]){var c="【".concat(o,"】 ").concat(e.ids.length," 条自定义事件");O["b"].confirm("确定要".concat(c,"？"),"温馨提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){r(t,c)})).catch((function(e){console.log(e)}))}else j.showWarning("请先选择要操作的数据")},r=function(t,n){var o={um_key:e.query.um_key,op_type:t,ids:e.ids};B.um.um_event_op(o).then((function(){c(),j.showSuccess("".concat(n,"成功"))}))},i=function(){if(n()){var t,o="",c=Object($e["a"])(e.tableData);try{for(c.s();!(t=c.n()).done;){var a=t.value;o=o.length>0?"".concat(o,"\n").concat(a.um_name,",").concat(a.um_displayName,",").concat(a.um_eventType):"".concat(a.um_name,",").concat(a.um_displayName,",").concat(a.um_eventType)}}catch(r){c.e(r)}finally{c.f()}var l=new Blob([o],{type:"text/plain;charset=utf-8"});Object(Xe["saveAs"])(l,"友盟自定义事件_".concat(e.query.um_key,".txt"))}},u=function(){n()&&(e.dialogFormVisible=!0)},s=function(t){console.log("onCurrentPageChange ".concat(t)),e.query.pg_index=t,c()},m=function(t){console.log("onPageSizeChange ".concat(t)),e.query.pg_index=1,e.query.pg_size=t,c()},d=function(t){console.log(t),e.ids=[];var n,o=Object($e["a"])(t);try{for(o.s();!(n=o.n()).done;){var c=n.value;e.ids.push(c.um_eventId)}}catch(a){o.e(a)}finally{o.f()}console.log(e.ids)},f=function(t,n,o){e.dialogFormVisible=!1,console.log("handleUploadSucceed ".concat(t).concat(n," ").concat(o)),200!=t.code&&j.showError(t.msg),401!=t.code&&403!=t.code?j.showSuccess("上传成功"):ct.push("/login")},p=function(t){console.log("onUmKeyChange ".concat(t)),e.query.pg_index=1,c()},h=function(){console.log("onFilterReset"),e.filterForm={keyword:"",order_by:"um_deviceYesterday",order:"desc",state:"normal",type:"",count_limit:{yesterday_min:void 0,yesterday_max:void 0,today_min:void 0,today_max:void 0,device_min:void 0,device_max:void 0}}},_=function(){e.filterForm.count_limit={yesterday_min:0,yesterday_max:0,today_min:0,today_max:0,device_min:0,device_max:0},g()},g=function(){console.log("onFilterSubmit ".concat(e.filterForm)),console.log(e.filterForm),e.showDrawer=!1,e.query.filter=e.filterForm,c()},y=function(){window.open("https://mobile.umeng.com/platform/".concat(e.query.um_key,"/function/events/dashboard"),"_blank")};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{getUmKeys:t,getUmEvents:c,editHost:a,parseEventOp:r,parseEventOpWithDialog:l,onCurrentPageChange:s,onPageSizeChange:m,exportCurrEvents:i,uploadEventFile:u,handleSelectionChange:d,handleUploadSucceed:f,onUmKeyChange:p,onFilterSubmit:g,onFilterReset:h,queryAllZeroEvent:_,openUmLink:y})}});n("c854");const Ge=H()(Qe,[["render",He],["__scopeId","data-v-0625101e"]]);var et=Ge,tt=n("6c02"),nt=[{path:"/",redirect:"/home",name:"首页"},{path:"/home",component:X,name:"友盟Key"},{path:"/other/task",component:xe,name:"任务管理"},{path:"/other/events",component:et,name:"事件管理",meta:{keepAlive:!0}},{path:"/other/config",component:le,name:"配置管理"},{path:"/login",component:je,name:"注册登录"}],ot=Object(tt["a"])({history:Object(tt["b"])(),routes:nt}),ct=ot,at=Object(o["r"])({created:function(){console.log("created"),this.checkCurrPathByUrl()},mounted:function(){console.log("mounted"),this.checkCurrPathByUrl(),this.parseNameInfo()},watch:{$route:function(e,t){console.log("$route 路由发生变化 ".concat(e," ").concat(t)),this.currPath=e.path,console.log("this.currPath = ".concat(this.currPath)),this.checkCurrPathByUrl(),this.parseNameInfo()}},setup:function(){var e=Object(o["N"])({showLeftMenu:!0,u_name:"登录",currPath:"/home",items:[{name:"友盟KEY",id:"1",icon:"el-icon-menu",path:"/home"},{name:"配置管理",id:"2",icon:"el-icon-edit-outline",path:"/other/config"},{name:"任务管理",id:"3",icon:"el-icon-time",path:"/other/task"},{name:"事件管理",id:"4",icon:"el-icon-date",path:"/other/events"}]}),t=function(){var t=localStorage.getItem("u_name")||"";t.length>7&&(t="".concat(t.substr(0,3),"...").concat(t.substr(t.length-2,t.length))),e.u_name=t},n=function(t,n){e.currPath=n,console.log("index=".concat(t,"     indexPath=").concat(n))},c=function(){j.showWarning("请重新登录"),localStorage.setItem("token",""),ct.push("/login")},a=function(){var t=-1!=window.location.href.indexOf("/login");e.showLeftMenu&&t?(console.log("checkCurrPathByUrl 在登录页面，需要隐藏左侧菜单"),e.showLeftMenu=!1):e.showLeftMenu||t||(console.log("checkCurrPathByUrl 不在登录页面，需要显示左侧菜单"),e.showLeftMenu=!0,document.cookie="UMEM_TOKEN=".concat(localStorage.getItem("token"),"; Max-Age=").concat(31536e3))};return Object(b["a"])(Object(b["a"])({},Object(o["Z"])(e)),{},{selectMenu:n,loginOut:c,parseNameInfo:t,checkCurrPathByUrl:a})}});n("59be");const lt=H()(at,[["render",p],["__scopeId","data-v-44dd5edb"]]);var rt=lt,it=Object(o["r"])({components:{HomeLeftAside:rt},created:function(){},mounted:function(){},setup:function(){var e=Object(o["N"])({});return Object(b["a"])({},Object(o["Z"])(e))}});const ut=H()(it,[["render",s]]);var st=ut,bt=function(e){Object(l["a"])(n,e);var t=Object(r["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(u["b"]);bt=Object(i["a"])([Object(u["a"])({components:{HomeView:st},name:"App"})],bt);var mt=bt;n("da54");const dt=H()(mt,[["render",c]]);var ft=dt,pt=(n("c69f"),n("3ef0")),Ot=n.n(pt),jt=function(e){e.use(O["c"],{locale:Ot.a})},ht=Object(o["j"])(ft);jt(ht),ht.use(ct),ht.mount("#app")},d921:function(e,t,n){},da54:function(e,t,n){"use strict";n("5e32")},fe86:function(e,t,n){}});